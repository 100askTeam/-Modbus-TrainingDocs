"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[121],{354:(d,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>j,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var s=n(5893),t=n(1151);const i={sidebar_position:8},r="\u7b2c7\u7ae0 \u4f4e\u6210\u672c Modbus \u4f20\u611f\u5668\u7684\u5b9e\u73b0",c={id:"Modbus-projectOne/chapter8",title:"\u7b2c7\u7ae0 \u4f4e\u6210\u672c Modbus \u4f20\u611f\u5668\u7684\u5b9e\u73b0",description:"7.1 \u786c\u4ef6\u8d44\u6e90\u4ecb\u7ecd\u4e0e\u63a5\u7ebf",source:"@site/docs/Modbus-projectOne/chapter8.md",sourceDirName:"Modbus-projectOne",slug:"/Modbus-projectOne/chapter8",permalink:"/Modbus-projectOne/chapter8",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/Modbus-TrainingDocs/tree/main/docs/Modbus-projectOne/chapter8.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"modbustrainoneSidebar",previous:{title:"\u7b2c6\u7ae0 libmodbus\u4f7f\u7528",permalink:"/Modbus-projectOne/chapter7"}},l={},h=[{value:"7.1 \u786c\u4ef6\u8d44\u6e90\u4ecb\u7ecd\u4e0e\u63a5\u7ebf",id:"71-\u786c\u4ef6\u8d44\u6e90\u4ecb\u7ecd\u4e0e\u63a5\u7ebf",level:2},{value:"7.2 \u5f00\u53d1\u73af\u5883\u642d\u5efa",id:"72-\u5f00\u53d1\u73af\u5883\u642d\u5efa",level:2},{value:"7.3 \u521b\u5efa\u4e0e\u4f53\u9a8c\u7b2c 1 \u4e2a\u5de5\u7a0b",id:"73-\u521b\u5efa\u4e0e\u4f53\u9a8c\u7b2c-1-\u4e2a\u5de5\u7a0b",level:2},{value:"7.3.1 \u521b\u5efa\u5de5\u7a0b",id:"731-\u521b\u5efa\u5de5\u7a0b",level:3},{value:"7.3.2 \u914d\u7f6e\u8c03\u8bd5\u5668",id:"732-\u914d\u7f6e\u8c03\u8bd5\u5668",level:3},{value:"7.3.3 \u914d\u7f6e GPIO \u64cd\u4f5c LED",id:"733-\u914d\u7f6e-gpio-\u64cd\u4f5c-led",level:3},{value:"7.4 UART \u7f16\u7a0b",id:"74-uart-\u7f16\u7a0b",level:2},{value:"7.4.1 \u4f7f\u7528 STM32CubeMX \u8fdb\u884c\u914d\u7f6e",id:"741-\u4f7f\u7528-stm32cubemx-\u8fdb\u884c\u914d\u7f6e",level:3},{value:"1.UART1",id:"1uart1",level:4},{value:"2.\u914d\u7f6e RS485\u65b9\u5411\u5f15\u811a",id:"2\u914d\u7f6e-rs485\u65b9\u5411\u5f15\u811a",level:4},{value:"7.4.2 \u5c01\u88c5 UART",id:"742-\u5c01\u88c5-uart",level:3},{value:"7.4.3 \u4e0a\u673a\u5b9e\u9a8c",id:"743-\u4e0a\u673a\u5b9e\u9a8c",level:3},{value:"1. \u786c\u4ef6\u8fde\u63a5",id:"1-\u786c\u4ef6\u8fde\u63a5",level:4},{value:"2. STM32H5 \u7a0b\u5e8f\u6539\u9020",id:"2-stm32h5-\u7a0b\u5e8f\u6539\u9020",level:4},{value:"3.STM32F030\u7a0b\u5e8f\u8c03\u8bd5",id:"3stm32f030\u7a0b\u5e8f\u8c03\u8bd5",level:4},{value:"7.5 libmodbus \u79fb\u690d",id:"75-libmodbus-\u79fb\u690d",level:2},{value:"7.5.1 \u79fb\u690d libmodbus",id:"751-\u79fb\u690d-libmodbus",level:3},{value:"7.5.2 \u4f7f\u7528 modbus \u63a7\u5236\u8bbe\u5907",id:"752-\u4f7f\u7528-modbus-\u63a7\u5236\u8bbe\u5907",level:3},{value:"7.5.3 \u4e0a\u673a\u5b9e\u9a8c",id:"753-\u4e0a\u673a\u5b9e\u9a8c",level:3},{value:"7.6 \u4f20\u611f\u5668\u8bbe\u8ba1",id:"76-\u4f20\u611f\u5668\u8bbe\u8ba1",level:2},{value:"7.6.1 \u8bbe\u8ba1\u601d\u8def",id:"761-\u8bbe\u8ba1\u601d\u8def",level:3},{value:"7.6.2 \u4e09\u6b3e\u4f20\u611f\u5668\u529f\u80fd\u53ca\u6240\u7528\u5f15\u811a",id:"762-\u4e09\u6b3e\u4f20\u611f\u5668\u529f\u80fd\u53ca\u6240\u7528\u5f15\u811a",level:3},{value:"7.6.3 \u70b9\u8868\u8bbe\u8ba1",id:"763-\u70b9\u8868\u8bbe\u8ba1",level:3},{value:"1.\u5f00\u5173\u91cf\u6a21\u5757\uff08SWITCH\uff09",id:"1\u5f00\u5173\u91cf\u6a21\u5757switch",level:4},{value:"2. \u73af\u5883\u76d1\u6d4b\u6a21\u5757\uff08ENV_MONITOR\uff09",id:"2-\u73af\u5883\u76d1\u6d4b\u6a21\u5757env_monitor",level:4},{value:"7.6.4 \u5f00\u5173\u91cf\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1",id:"764-\u5f00\u5173\u91cf\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1",level:3},{value:"7.6.5 \u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1",id:"765-\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1",level:3},{value:"1. \u786c\u4ef6\u7535\u8def",id:"1-\u786c\u4ef6\u7535\u8def",level:4},{value:"2. \u914d\u7f6e GPIO \u548c ADC",id:"2-\u914d\u7f6e-gpio-\u548c-adc",level:4},{value:"3. \u8bfb\u53d6 ADC \u7684\u5173\u952e\u4ee3\u7801",id:"3-\u8bfb\u53d6-adc-\u7684\u5173\u952e\u4ee3\u7801",level:4},{value:"7.6.6 \u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1",id:"766-\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1",level:3},{value:"1. \u786c\u4ef6\u7535\u8def\u4e0e\u64cd\u4f5c\u65b9\u6cd5",id:"1-\u786c\u4ef6\u7535\u8def\u4e0e\u64cd\u4f5c\u65b9\u6cd5",level:4},{value:"2. \u914d\u7f6e I2C",id:"2-\u914d\u7f6e-i2c",level:4},{value:"3. \u8bfb\u53d6\u6e29\u6e7f\u5ea6\u5173\u952e\u4ee3\u7801",id:"3-\u8bfb\u53d6\u6e29\u6e7f\u5ea6\u5173\u952e\u4ee3\u7801",level:4},{value:"7.7 \u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668",id:"77-\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668",level:2},{value:"7.7.1 \u4e3b\u63a7\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668",id:"771-\u4e3b\u63a7\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668",level:3},{value:"7.7.2 \u4e0a\u4f4d\u673a\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668",id:"772-\u4e0a\u4f4d\u673a\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668",level:3},{value:"7.8 \u7a0b\u5e8f\u6539\u8fdb",id:"78-\u7a0b\u5e8f\u6539\u8fdb",level:2},{value:"7.8.1 \u4e3b\u63a7UART\u4ee3\u7801\u7684\u66f4\u597d\u5c01\u88c5",id:"781-\u4e3b\u63a7uart\u4ee3\u7801\u7684\u66f4\u597d\u5c01\u88c5",level:3},{value:"7.8.2 \u589e\u52a0\u5bb9\u9519\u4ee3\u7801",id:"782-\u589e\u52a0\u5bb9\u9519\u4ee3\u7801",level:3},{value:"<strong>1. \u6dfb\u52a0UART\u9519\u8bef\u6062\u590d\u4ee3\u7801</strong>",id:"1-\u6dfb\u52a0uart\u9519\u8bef\u6062\u590d\u4ee3\u7801",level:4},{value:"<strong>2. \u8c03\u6574libmodbus\u7684\u8d85\u65f6\u65f6\u95f4</strong>",id:"2-\u8c03\u6574libmodbus\u7684\u8d85\u65f6\u65f6\u95f4",level:4},{value:"<strong>3. \u4e3b\u63a7\u53d1\u51falibmodbus\u8bf7\u6c42\u7684\u95f4\u9694\u52a0\u5927</strong>",id:"3-\u4e3b\u63a7\u53d1\u51falibmodbus\u8bf7\u6c42\u7684\u95f4\u9694\u52a0\u5927",level:4}];function x(d){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...d.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"\u7b2c7\u7ae0-\u4f4e\u6210\u672c-modbus-\u4f20\u611f\u5668\u7684\u5b9e\u73b0",children:"\u7b2c7\u7ae0 \u4f4e\u6210\u672c Modbus \u4f20\u611f\u5668\u7684\u5b9e\u73b0"}),"\n",(0,s.jsx)(e.h2,{id:"71-\u786c\u4ef6\u8d44\u6e90\u4ecb\u7ecd\u4e0e\u63a5\u7ebf",children:"7.1 \u786c\u4ef6\u8d44\u6e90\u4ecb\u7ecd\u4e0e\u63a5\u7ebf"}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u7684 Modbus \u4f20\u611f\u5668\u5f00\u53d1\u5957\u4ef6\u5171\u6709\u4e09\u4e2a\uff0c \u4e09\u4e2a\u677f\u5b50\u7684\u4f7f\u7528\u7684\u4e3b\u63a7\u65b9\u6848\u662f STM32F030\u82af\u7247\uff0c\u786c\u4ef6\u63a5\u53e3\u8d44\u6e90\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image1.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u5f00\u5173\u91cf\u6a21\u5757"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image2.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u6e29\u6e7f\u5ea6\u53d8\u9001\u5668\u6a21\u5757"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image3.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u73af\u5883\u68c0\u6d4b\u6a21\u5757"}),"\n",(0,s.jsx)(e.h2,{id:"72-\u5f00\u53d1\u73af\u5883\u642d\u5efa",children:"7.2 \u5f00\u53d1\u73af\u5883\u642d\u5efa"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u524d\u9762\u6211\u4eec\u5df2\u7ecf\u5b89\u88c5\u4e86 Keil MDK\u3001STM32CubeMX\u3001STM32CubeProgrammer\u3001ST-Link \u9a71 \u52a8\u3001 CH340 \u9a71\u52a8\u3002\u56e0\u6b64\u5728\u8fd9\u91cc\u6211\u4eec\u53ea\u9700\u7ed9 Keil MDK \u5b89\u88c5 STM32F030 \u5bf9\u5e94\u7684 PACK \u5373\u53ef\u5bf9\u6539 \u82af\u7247\u8fdb\u884c\u7f16\u7801\u5f00\u53d1\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5b89\u88c5 PACK \u7684\u65b9\u6cd5\u6709\u4e24\u79cd\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7b2c\u4e00\u79cd\u65b9\u6cd5\uff1a\u53cc\u51fb\u8fd0\u884c\u5f00\u53d1\u677f\u914d\u5957\u8d44\u6599\u4e2d\u7684 Pack \u5b89\u88c5\u5305\uff0c\u968f\u540e\u5f39\u51fa\u5b89\u88c5\u754c\u9762\uff0c\u6309\u7167\u9ed8 \u8ba4\u9009\u9879\u8fdb\u884c\u5b89\u88c5\u5373\u53ef\u3002\uff1a"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image4.png",alt:"img"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff0c\u5728\u7ebf\u5b89\u88c5\uff0c \u4e0b\u9762\u6f14\u793a\u5982\u4f55\u5728\u7ebf\u5b89\u88c5\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6253\u5f00Keil\u4e4b\u540e\uff0c \u70b9\u51fb\u5982\u4e0b\u6309\u94ae\u542f\u52a8\u201cPack Installer\u201d\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image5.png",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"\u4f7f\u7528 \u201cPack Installer\u201d \u53ef \u4ee5 \u65b9 \u4fbf \u7684 \u5bf9 Pack \u5b89 \u88c5 \u548c \u7ba1 \u7406 \u3002 \u5728 \u5de6 \u4e0a \u89d2 \u641c \u7d22 \u6846 \u8f93 \u5165 \u201cSTM32F030\u201d\uff0c\u5c55\u5f00\u641c\u7d22\u7ed3\u679c\uff0c\u53ef\u4ee5\u770b\u5230STM32F030CC\uff0c\u70b9\u51fb\u53f3\u8fb9\u7684\u7b80\u4ecb\u94fe\u63a5\u5373\u53ef\u8df3\u8f6c \u5230Pack\u4e0b\u8f7d\u9875\u9762\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image6.png",alt:"img"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5982\u679c\u8df3\u8f6c\u7f51\u9875\u65e0\u6cd5\u6253\u5f00\uff0c\u53ef\u76f4\u63a5\u6253\u5f00 Pack \u4e0b\u8f7d\u603b\u5165\u53e3\uff08",(0,s.jsx)(e.a,{href:"http://www.keil.com/dd2/Pack/%EF%BC%89%E3%80%82",children:"www.keil.com/dd2/Pack/\uff09\u3002"})," \u8fdb\u5165 Pack \u4e0b\u8f7d\u603b\u5165\u53e3\u540e\uff0c\u641c\u7d22\u201cSTM32F030\u201d\uff0c\u627e\u5230\u201cSTM030CCT\u201d\u70b9\u51fb, \u5982\u4e0b\u56fe\u6240\u793a\uff08\u5b9e \u6d4b\u90e8\u5206\u7f51\u7edc\u73af\u5883\u6253\u5f00\u8be5\u94fe\u63a5\u65e0 Pack \u5217\u8868\uff0c\u8bf7\u5c1d\u8bd5\u6362\u4e2a\u7f51\u7edc\u73af\u5883\u6d4b\u8bd5\uff0c\u4ecd\u65e7\u4e0d\u884c\u5219\u4f7f\u7528\u914d \u5957\u8d44\u6599 Pack\uff09\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image7.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u70b9\u51fb\u4f1a\u8df3\u8f6c\u5230 pack \u5305\u754c\u9762\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u201dSTM32F0xxDFP\u201c\u5373\u53ef\u8df3\u8f6c\u5230 pack \u5305\u4e0b\u8f7d\u754c\u9762\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u201dSTM32F0xxDFP\u201c\u5904\u5373\u53ef\u4e0b\u8f7d pack \u5305\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image8.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image9.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0b\u8f7d\u5b8c\u6210\u5f97\u5230\u201cKeil.STM32F0xx_DFP.2.1.1.pack\u201d\uff0c\u76f4\u63a5\u53cc\u51fb\u8be5\u6587\u4ef6\uff0c\u968f\u540e\u5f39\u51fa\u5b89\u88c5\u754c \u9762\uff0c\u6309\u7167\u9ed8\u8ba4\u9009\u9879\u8fdb\u884c\u5b89\u88c5\u5373\u53ef\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"73-\u521b\u5efa\u4e0e\u4f53\u9a8c\u7b2c-1-\u4e2a\u5de5\u7a0b",children:"7.3 \u521b\u5efa\u4e0e\u4f53\u9a8c\u7b2c 1 \u4e2a\u5de5\u7a0b"}),"\n",(0,s.jsx)(e.h3,{id:"731-\u521b\u5efa\u5de5\u7a0b",children:"7.3.1 \u521b\u5efa\u5de5\u7a0b"}),"\n",(0,s.jsx)(e.p,{children:"\u542f\u52a8 STM32CubeMX \u540e\uff0c\u70b9\u51fb\u5982\u4e0b\u56fe\u6807\u5f00\u59cb\u9009\u62e9 MCU\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image10.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u4e0b\u56fe\u8f93\u5165\u578b\u53f7\u201cSTM32F030CCT\u201d\uff0c\u53cc\u51fb\u627e\u5230\u7684\u82af\u7247\uff0c \u5f00\u59cb\u521b\u5efa\u5de5\u7a0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image11.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u8c03\u9ad8 CPU \u9891\u7387\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image12.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u914d\u7f6e\u5de5\u7a0b\uff0c \u5982\u4e0b\u64cd\u4f5c\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image13.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u6307\u5b9a\u4ee3\u7801\u751f\u6210\u65b9\u6cd5\uff0c \u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image14.png",alt:"img"})}),"\n",(0,s.jsx)(e.h3,{id:"732-\u914d\u7f6e\u8c03\u8bd5\u5668",children:"7.3.2 \u914d\u7f6e\u8c03\u8bd5\u5668"}),"\n",(0,s.jsxs)(e.p,{children:["\u65b0\u5efa\u7684\u5de5\u7a0b\u8981\u914d\u7f6e\u8c03\u8bd5\u5668\uff0c\u53c2\u8003",(0,s.jsx)(e.a,{href:"#bookmark1",children:"\u300a2.2.3 \u914d\u7f6e\u8c03\u8bd5\u5668\u300b \u3002"})]}),"\n",(0,s.jsx)(e.p,{children:"\u7136\u540e\u5c31\u53ef\u4ee5\u7f16\u8bd1\u7a0b\u5e8f\u3001\u70e7\u5199\u8fd0\u884c\u4e86\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"733-\u914d\u7f6e-gpio-\u64cd\u4f5c-led",children:"7.3.3 \u914d\u7f6e GPIO \u64cd\u4f5c LED"}),"\n",(0,s.jsx)(e.p,{children:"\u6253\u5f00\u4f4d\u4e8e\u201c5_\u786c\u4ef6\u8d44\u6599\\01_\u5f00\u53d1\u677f\u539f\u7406\u56fe\\STM32F030CCT6_SWITCH_V11.pdf\u201d\u7684\u539f\u7406\u56fe \u6587\u4ef6\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6839\u636e\u5f00\u53d1\u677f\u539f\u7406\u56fe\u53ef\u4ee5\u770b\u5230 F030\u7684LED \u5f15\u811a\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image15.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u53ef\u4ee5\u53cc\u51fb\u6253\u5f00\u5de5\u7a0b\u4e2d\u5982\u4e0b\u6587\u4ef6\u8fdb\u5165STM32CubeMX\u8fdb\u884c\u914d\u7f6e\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image16.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u7136\u540e\u5982\u4e0b\u914d\u7f6e PB11 \u3001PB12 \u3001PB13 \u4e3a\u8f93\u51fa\u5f15\u811a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image17.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u201cGENERATE CODE\u201d\u6309\u94ae\u540e\u6253\u5f00\u5de5\u7a0b\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5728main\u51fd\u6570\u7684\u5faa\u73af\u91cc\uff0c \u589e\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"/* Infinite loop */\n/* USER CODE BEGIN WHILE */\nwhile (1)\n{\n    /* USER CODE END WHILE */\n    /* USER CODE BEGIN 3 */\n    /* set LED output high */\n    HAL_GPIO_WritePin(GPIOB, GPIO_PIN_11, GPIO_PIN_SET); //LED1\n    HAL_GPIO_WritePin(GPIOB, GPIO_PIN_12, GPIO_PIN_SET); //LED2\n    HAL_GPIO_WritePin(GPIOB, GPIO_PIN_13, GPIO_PIN_SET); //LED3\n    HAL_Delay(500);\n    /* set LED output low */\n    HAL_GPIO_WritePin(GPIOB, GPIO_PIN_11, GPIO_PIN_RESET);//LED1\n    HAL_GPIO_WritePin(GPIOB, GPIO_PIN_12, GPIO_PIN_RESET); //LED2\n    HAL_GPIO_WritePin(GPIOB, GPIO_PIN_13, GPIO_PIN_RESET); //LED3\n    HAL_Delay(500);\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u6700\u540e\u7f16\u8bd1\u3001\u70e7\u5199\u3001\u8fd0\u884c\uff0c \u53ef\u4ee5\u770b\u5230\u5f00\u53d1\u677f\u7684 LED \u95ea\u70c1\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"74-uart-\u7f16\u7a0b",children:"7.4 UART \u7f16\u7a0b"}),"\n",(0,s.jsx)(e.h3,{id:"741-\u4f7f\u7528-stm32cubemx-\u8fdb\u884c\u914d\u7f6e",children:"7.4.1 \u4f7f\u7528 STM32CubeMX \u8fdb\u884c\u914d\u7f6e"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_\u7a0b\u5e8f\u6e90\u7801\\01_\u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-5_STM32F030\u4e32\u53e3\u7f16\u7a0b\\demo\u201d\u3002 RS4385\u63a5\u53e3\u539f\u7406\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image18.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u9700\u8981\u5728STM32CubeMX\u91cc\u914d\u7f6eUART1\uff0c\u5e76\u4e14\u914d\u7f6ePA8\u4e3a\u8f93\u51fa\u5f15\u811a\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"1uart1",children:"1.UART1"}),"\n",(0,s.jsx)(e.p,{children:"\u5148\u4f7f\u80fd UART1\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image19.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u7136\u540e\u4f7f\u80fd\u4e2d\u65ad\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image20.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u524d\u9762STM32H5\u7684UART\u7a0b\u5e8f\u91cc\u4f7f\u7528\u4e86DMA\uff0c\u672c\u8282\u6545\u610f\u4e0d\u4f7f\u7528DMA\u800c\u4f7f\u7528\u7eaf\u4e2d\u65ad\u6765 \u5b9e\u73b0UART\uff0c\u591a\u5b66\u4e00\u79cd\u7f16\u7a0b\u65b9\u6cd5\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"2\u914d\u7f6e-rs485\u65b9\u5411\u5f15\u811a",children:"2.\u914d\u7f6e RS485\u65b9\u5411\u5f15\u811a"}),"\n",(0,s.jsx)(e.p,{children:"STM32H5\u4e3b\u63a7\u677f\u4e0a\u4f7f\u7528\u7684RS485\u8f6c\u6362\u82af\u7247\u662fMAX13487EESA\uff0c\u5b83\u4f1a\u81ea\u52a8\u5207\u6362\u53d1\u9001\u3001 \u63a5\u6536\u65b9\u5411\uff0c\u65e0\u9700\u7a0b\u5e8f\u8fdb\u884c\u65b9\u5411\u7684\u63a7\u5236\u3002\u4f7f\u7528STM32F030\u5236\u4f5c\u7684\u201c\u5ec9\u4ef7\u4f20\u611f\u5668\u201d\u91cc\uff0c\u4f7f\u7528 \u7684RS485\u8f6c\u6362\u82af\u7247\u662fSIT3088ETK\uff0c\u5b83\u9700\u8981\u4f7f\u7528\u4e00\u4e2aGPIO\u6765\u63a7\u5236\u65b9\u5411\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image21.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u56fe\u4e2d\uff0cRS485_CTRL\u4f7f\u7528\u7684\u5f15\u811a\u662fPA8\uff0c\u6240\u4ee5\u8fd8\u9700\u8981\u628a\u5b83\u914d\u7f6e\u4e3a\u8f93\u51fa\u5f15\u811a\uff0c\u8f93\u51fa\u4f4e \u7535\u5e73\uff08\u8ba9SIT3088ETK\u9ed8\u8ba4\u4e3a\u63a5\u6536\u72b6\u6001\uff09 \u3002\u5982\u4e0b\u914d\u7f6e\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image22.png",alt:"img"})}),"\n",(0,s.jsx)(e.h3,{id:"742-\u5c01\u88c5-uart",children:"7.4.2 \u5c01\u88c5 UART"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_\u7a0b\u5e8f\u6e90\u7801\\01_\u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-5_STM32F030\u4e32\u53e3\u7f16\u7a0b\\demo\u201d\u3002 \u73b0\u573a\u7f16\u7a0b\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"743-\u4e0a\u673a\u5b9e\u9a8c",children:"7.4.3 \u4e0a\u673a\u5b9e\u9a8c"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_\u7a0b\u5e8f\u6e90\u7801\\01_\u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-6_STM32F030 \u4e32\u53e3\u6d4b\u8bd5\u201d\uff0c\u91cc\u9762\u6709 2 \u4e2a\u7a0b\u5e8f\uff1ah5_demo\u3001f030_demo\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u8981\u6d4b\u8bd5 STM32F030 \u7684\u4e32\u53e3\uff0c \u53ea\u9700\u8981\u628a\u5b83\u7684 485 \u63a5\u53e3\u8fde\u63a5\u5230 PC \u53bb\u5c31\u53ef\u4ee5\u4e86\uff0c\u4f46\u662f\u6211\u4eec\u6ca1 \u6709 PC \u4e0a\u4f7f\u7528\u7684\u201cUSB \u8f6c 485\u201d\u6a21\u5757\uff0c\u6240\u4ee5\u4f7f\u7528 STM32H5 \u6765\u5b9e\u73b0\u4e00\u4e2a\u201cUSB \u8f6c 485 \u6a21\u5757\u201d\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5b83\u4ece USB \u4e32\u53e3\u8bfb\u5230\u6570\u636e\uff0c\u518d\u4ece 485 \u63a5\u53e3\u53d1\u9001\u51fa\u53bb\uff1b"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5b83\u4ece 485 \u63a5\u53e3\u8bfb\u5230\u6570\u636e\uff0c\u518d\u4ece USB \u4e32\u53e3\u53d1\u9001\u7ed9 PC\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"1-\u786c\u4ef6\u8fde\u63a5",children:"1. \u786c\u4ef6\u8fde\u63a5"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image23.png",alt:"img"})}),"\n",(0,s.jsx)(e.h4,{id:"2-stm32h5-\u7a0b\u5e8f\u6539\u9020",children:"2. STM32H5 \u7a0b\u5e8f\u6539\u9020"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_\u7a0b\u5e8f\u6e90\u7801\\01_\u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-6_STM32F030\u4e32\u53e3\u6d4b\u8bd5\\h5_demo\u201d\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"3stm32f030\u7a0b\u5e8f\u8c03\u8bd5",children:"3.STM32F030\u7a0b\u5e8f\u8c03\u8bd5"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_\u7a0b\u5e8f\u6e90\u7801\\01_\u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-6_STM32F030\u4e32\u53e3\u6d4b\u8bd5\\f030_demo\u201d\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"75-libmodbus-\u79fb\u690d",children:"7.5 libmodbus \u79fb\u690d"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_ \u7a0b\u5e8f\u6e90\u7801\\01_ \u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-7_STM32F030 \u4e0alibmodbus \u79fb\u690d \\f030_demo\u201d\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"751-\u79fb\u690d-libmodbus",children:"7.5.1 \u79fb\u690d libmodbus"}),"\n",(0,s.jsx)(e.p,{children:"\u628a\u201c7-6_STM32F030\u4e32\u53e3\u6d4b\u8bd5\\h5_demo\\demo\\Middlewares\\Third_Party\\libmodbus\u201d\u6574 \u4e2a\u76ee\u5f55\u590d\u5236\u5230f030_demo\u4e2d\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5728Keil\u5de5\u7a0b\u4e2d\u6dfb\u52a0\u4ee3\u7801\uff0c \u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image24.png",alt:"img"})}),"\n",(0,s.jsx)(e.h3,{id:"752-\u4f7f\u7528-modbus-\u63a7\u5236\u8bbe\u5907",children:"7.5.2 \u4f7f\u7528 modbus \u63a7\u5236\u8bbe\u5907"}),"\n",(0,s.jsx)(e.p,{children:"STM32F030\u4f5c\u4e3a\u4ece\u8bbe\u5907\uff08sever\uff09\uff0c\u7f16\u5199\u201cCore\\Src\\freertos.c\u201d\uff1a"}),"\n",(0,s.jsx)(e.h3,{id:"753-\u4e0a\u673a\u5b9e\u9a8c",children:"7.5.3 \u4e0a\u673a\u5b9e\u9a8c"}),"\n",(0,s.jsx)(e.h2,{id:"76-\u4f20\u611f\u5668\u8bbe\u8ba1",children:"7.6 \u4f20\u611f\u5668\u8bbe\u8ba1"}),"\n",(0,s.jsx)(e.h3,{id:"761-\u8bbe\u8ba1\u601d\u8def",children:"7.6.1 \u8bbe\u8ba1\u601d\u8def"}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u4f4d\u673a\uff08PC \u8f6f\u4ef6\uff09\u6216\u4e2d\u63a7\uff08STM32H5\uff09\u901a\u8fc7 modbus \u534f\u8bae\u8bbf\u95ee STM32F030 \u4f20\u611f\u5668\u65f6\uff0c\u8bfb \u5199\u7684\u662f STM32F030 \u5206\u914d\u51fa\u6765\u7684 4 \u4e2a\u7c7b\u578b\u7684\u7f13\u51b2\u533a\u3002\u8fd9\u91cc\u9700\u8981\u89e3\u51b3 2 \u4e2a\u95ee\u9898\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u8fd9 4 \u4e2a\u7c7b\u578b\u7684\u7f13\u51b2\u533a\u8d77\u59cb\u5730\u5740\u3001\u5927\u5c0f\u5206\u522b\u662f\u591a\u5c11\uff1f \u8fd9\u6839\u636e\u4f20\u611f\u5668\u7684\u529f\u80fd\u6765\u8bbe\u7f6e\u3002\u6bd4\u5982\u6709 2 \u4e2a\u6309\u952e\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5206\u914d 2 \u4e2a\u201c\u53ea\u8bfb\u7684\u4f4d\u5bc4\u5b58\u5668\u201d\uff08DI\uff09\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u503c\uff0c \u5982\u4f55\u8ddf\u786c\u4ef6\u5bf9\u5e94\uff1f \u6bd4\u5982\u4e0a\u4f4d\u673a\u8bfb DI \u5bc4\u5b58\u5668\u65f6\uff0c \u8c01\u63d0\u4f9b\u8fd9\u4e9b\u503c\uff1f\u4f20\u611f \u5668\u7684\u7a0b\u5e8f\u5e94\u8be5\u8bfb\u53d6\u6309\u952e\u503c\uff0c\u586b\u5145 DI \u5bc4\u5b58\u5668\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7b2c 1 \u4e2a\u6b65\u9aa4\uff0c\u88ab\u79f0\u4e3a\u201c\u70b9\u8868\u8bbe\u8ba1\u201d\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"762-\u4e09\u6b3e\u4f20\u611f\u5668\u529f\u80fd\u53ca\u6240\u7528\u5f15\u811a",children:"7.6.2 \u4e09\u6b3e\u4f20\u611f\u5668\u529f\u80fd\u53ca\u6240\u7528\u5f15\u811a"}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9 3 \u6b3e\u4f20\u611f\u5668\u7684\u539f\u7406\u56fe\u5728\u7f51\u76d8\u5982\u4e0b\u76ee\u5f55\u91cc\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image25.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u5b83\u4eec\u63a7\u5236\u5916\u8bbe\u6240\u7528\u7684\u5f15\u811a\uff0c\u5217\u8868\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{}),(0,s.jsx)(e.th,{children:"\u529f\u80fd"}),(0,s.jsx)(e.th,{children:"\u4f7f\u7528\u7684\u5f15\u811a"}),(0,s.jsx)(e.th,{children:"\u63cf\u8ff0"}),(0,s.jsx)(e.th,{children:"\u5bc4\u5b58\u5668\u7c7b\u522b"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ENV_MONITOR \u73af\u5883\u76d1\u6d4b\u6a21\u5757"}),(0,s.jsx)(e.td,{children:"BEEP1"}),(0,s.jsx)(e.td,{children:"PB15"}),(0,s.jsx)(e.td,{children:"\u9ad8\u7535\u5e73\u53d1\u58f0"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"BEEP2"}),(0,s.jsx)(e.td,{children:"PB14"}),(0,s.jsx)(e.td,{children:"\u9ad8\u7535\u5e73\u53d1\u58f0"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"LED1"}),(0,s.jsx)(e.td,{children:"PB11"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u53d1\u5149"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"LED2"}),(0,s.jsx)(e.td,{children:"PB12"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u53d1\u5149"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"LED3"}),(0,s.jsx)(e.td,{children:"PB13"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u53d1\u5149"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"OPTO_ADC"}),(0,s.jsx)(e.td,{children:"PA1"}),(0,s.jsx)(e.td,{children:"\u7535\u538b\u503c\u8ddf\u5149\u5f3a\u6210\u53cd\u6bd4"}),(0,s.jsx)(e.td,{children:"AI"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"RES_ADC"}),(0,s.jsx)(e.td,{children:"PA2"}),(0,s.jsx)(e.td,{children:"\u7535\u538b\u503c\u8ddf\u53ef\u8c03\u7535\u963b\u6210\u53cd\u6bd4"}),(0,s.jsx)(e.td,{children:"AI"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"SWITCH\u5f00\u5173\u91cf\u6a21\u5757"}),(0,s.jsx)(e.td,{children:"KEY1"}),(0,s.jsx)(e.td,{children:"PA3"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u8868\u793a\u88ab\u6309\u4e0b"}),(0,s.jsx)(e.td,{children:"DI"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"KEY2"}),(0,s.jsx)(e.td,{children:"PA4"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u8868\u793a\u88ab\u6309\u4e0b"}),(0,s.jsx)(e.td,{children:"DI"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"KEY3"}),(0,s.jsx)(e.td,{children:"PA5"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u8868\u793a\u88ab\u6309\u4e0b"}),(0,s.jsx)(e.td,{children:"DI"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"K1_CTRL"}),(0,s.jsx)(e.td,{children:"PB5"}),(0,s.jsx)(e.td,{children:"\u9ad8\u7535\u5e73\u4f7f\u80fd\u7ee7\u7535\u5668"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"K2_CTRL"}),(0,s.jsx)(e.td,{children:"PB4"}),(0,s.jsx)(e.td,{children:"\u9ad8\u7535\u5e73\u4f7f\u80fd\u7ee7\u7535\u5668"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"LED1"}),(0,s.jsx)(e.td,{children:"PB11"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u53d1\u5149"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"LED2"}),(0,s.jsx)(e.td,{children:"PB12"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u53d1\u5149"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"LED3"}),(0,s.jsx)(e.td,{children:"PB13"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u53d1\u5149"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"TEMP_HUMI\u6e29\u6e7f\u5ea6\u6a21\u5757"}),(0,s.jsx)(e.td,{children:"BEEP1"}),(0,s.jsx)(e.td,{children:"PB15"}),(0,s.jsx)(e.td,{children:"\u9ad8\u7535\u5e73\u53d1\u58f0"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"BEEP2"}),(0,s.jsx)(e.td,{children:"PB14"}),(0,s.jsx)(e.td,{children:"\u9ad8\u7535\u5e73\u53d1\u58f0"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"LED1"}),(0,s.jsx)(e.td,{children:"PB11"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u53d1\u5149"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"LED2"}),(0,s.jsx)(e.td,{children:"PB12"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u53d1\u5149"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"LED3"}),(0,s.jsx)(e.td,{children:"PB13"}),(0,s.jsx)(e.td,{children:"\u4f4e\u7535\u5e73\u53d1\u5149"}),(0,s.jsx)(e.td,{children:"DO"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"I2C1_SCL"}),(0,s.jsx)(e.td,{children:"PB6"}),(0,s.jsx)(e.td,{children:"\u53ef\u4ee5\u8bfb\u5230\u6e29\u5ea6\u3001\u6e7f\u5ea6\tAI"}),(0,s.jsx)(e.td,{children:"AI"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"I2C2_SDA"}),(0,s.jsx)(e.td,{children:"PB7"}),(0,s.jsx)(e.td,{children:"\u53ef\u4ee5\u8bfb\u5230\u6e29\u5ea6\u3001\u6e7f\u5ea6\tAI"}),(0,s.jsx)(e.td,{children:"AI"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"763-\u70b9\u8868\u8bbe\u8ba1",children:"7.6.3 \u70b9\u8868\u8bbe\u8ba1"}),"\n",(0,s.jsx)(e.p,{children:"\u6240\u8c13\u70b9\u8868\uff0c \u5c31\u662f\u4e00\u4e2a modbus \u8bbe\u5907\uff0c\u5b83\u7684\u5730\u5740\u662f\u4ec0\u4e48\uff1f \u5b83\u91cc\u9762 4 \u7c7b\u5bc4\u5b58\u5668\u7684\u5730\u5740\u3001\u529f\u80fd \u662f\u4ec0\u4e48\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u67e5\u770b\u70b9\u8868\u65f6\uff0c\u7ecf\u5e38\u78b0\u5230\u201c\u9065\u6d4b\u3001\u9065\u4fe1\u3001\u9065\u63a7\u3001\u9065\u8c03\u201d\u7684\u6982\u5ff5\u3002\u5b83\u4eec\u5b9e\u8d28\u4e0a\u5c31\u662f\u524d\u9762 \u8bb2\u89e3 modbus \u65f6\u5f15\u5165\u7684\u201cAI\u3001DI\u3001DO\u3001AO\u201d\u3002\u8fd9\u4e9b\u6982\u5ff5\u8d77\u6e90\u4e8e\u7535\u529b\u7cfb\u7edf\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u7535\u529b\u9886\u57df\u4e2d\u56db\u9065\u7cfb\u7edf\u662f\u6307\u9065\u6d4b\u3001\u9065\u4fe1\u3001\u9065\u63a7\u3001\u9065\u8c03\u529f\u80fd\u7cfb\u7edf\uff0c \u56db\u9065\u529f\u80fd\u662f\u7535\u529b\u76d1\u63a7\u7cfb \u7edf\u6700\u57fa\u672c\u6700\u91cd\u8981\u7684\u529f\u80fd\u3002\u5177\u4f53\u6765\u8bf4\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u9065\u6d4b(\u9065\u6d4b\u4fe1\u606f\uff0cAI)\uff1a\u8fdc\u7a0b\u6d4b\u91cf\uff1b\u8fdc\u65b9\u6d4b\u91cf\u663e\u793a\u8bf8\u5982\u7535\u6d41\u3001\u7535\u538b\u3001\u529f\u7387\u3001\u538b\u529b\u3001\u6e29\u5ea6\u7b49 \u6a21\u62df\u91cf\uff1b"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u9065\u4fe1(\u9065\u4fe1\u4fe1\u606f\uff0cDI)\uff1a\u8fdc\u7a0b\u4fe1\u53f7\uff1b\u8fdc\u65b9\u76d1\u89c6\u5404\u7c7b\u7535\u6c14\u5f00\u5173\u548c\u8bbe\u5907\u3001\u673a\u68b0\u8bbe\u5907\u7684\u5de5\u4f5c\u72b6\u6001 \u548c\u8fd0\u8f6c\u60c5\u51b5\u72b6\u6001\u7b49\uff1b"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u9065\u63a7(\u9065\u63a7\u4fe1\u606f\uff0cDO)\uff1a\u8fdc\u7a0b\u63a7\u5236\uff1b\u63a5\u53d7\u5e76\u6267\u884c\u9065\u63a7\u547d\u4ee4\uff0c\u8fdc\u65b9\u63a7\u5236\u6216\u4fdd\u62a4\u7535\u6c14\u8bbe\u5907\u53ca\u7535 \u6c14\u673a\u68b0\u5316\u7684\u5206\u5408\u8d77\u505c\u7b49\u5de5\u4f5c\u72b6\u6001\uff1b"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u9065\u8c03(\u9065\u8c03\u4fe1\u606f\uff0cAO)\uff1a\u8fdc\u7a0b\u8c03\u8282\uff1b\u63a5\u53d7\u5e76\u6267\u884c\u9065\u8c03\u547d\u4ee4\uff0c\u8fdc\u65b9\u8bbe\u5b9a\u53ca\u8c03\u6574\u6240\u63a7\u8bbe\u5907\u7684\u5de5 \u4f5c\u53c2\u6570\u3001\u6807\u51c6\u53c2\u6570\uff1b\u56db\u9065\u9065\u6d4b\u3001\u9065\u4fe1\u3001\u9065\u63a7\u3001\u9065\u8c03\u5e38\u5e38\u88ab\u7b80\u79f0\u4e3a AI\u3001DI\u3001DO\u3001AO\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"AI\u3001DI\u3001DO\u3001AO \u90fd\u662f\u82f1\u6587\u540d\u79f0\u7684\u9996\u5b57\u6bcd\u7f29\u5199\uff0cA \u7684\u82f1\u6587\u5168\u79f0 Analog (\u6a21\u62df\u91cf)\u3001D \u7684\u82f1 \u6587\u5168\u79f0 Digital (\u6570\u5b57\u91cf) \u3001I \u7684\u82f1\u6587\u5168\u79f0 Input (\u8f93\u5165)\u3001O \u7684\u82f1\u6587\u5168\u79f0 Output (\u8f93\u51fa)\u3002 \u56e0\u6b64, AI \u8868\u793a\u7684\u662f\u6a21\u62df\u4fe1\u53f7\u8f93\u51fa\uff0c AO \u662f\u6a21\u62df\u4fe1\u53f7\u8f93\u5165\uff0cDI \u662f\u6570\u5b57\u4fe1\u53f7\u8f93\u5165\uff0c DO \u662f\u6570\u5b57\u4fe1 \u53f7\u8f93\u51fa\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u968f\u7740\u6280\u672f\u4e0d\u65ad\u5730\u8fdb\u6b65\uff0c\u73b0\u5728\u4e5f\u6709\u4e94\u9065\u7684\u8bf4\u6cd5\uff0c \u5373\u5728\u56db\u9065\u7684\u57fa\u7840\u4e0a\u52a0\u4e0a\u9065\u89c6\uff0c \u9065\u89c6\u6307\u7684 \u662f\u6307\u5229\u7528\u5305\u62ec\u7535\u5b50\u6280\u672f\u3001\u8ba1\u7b97\u673a\u6280\u672f\u3001\u81ea\u52a8\u5316\u6280\u672f\u7b49\u76d1\u89c6\u5e76\u8bb0\u5f55\u8bbe\u5907\u8fd0\u884c\u60c5\u51b5\u548c\u73af\u5883\u5b89\u5168 \u60c5\u51b5\u3002\u56e0\u6b64\u4f34\u968f\u7740\u6280\u672f\u53d1\u5c55\uff0c \u7535\u529b\u7cfb\u7edf\u4e2d\u4ece\u4e00\u9065\uff08\u9065\u4fe1 DI\uff09\u9636\u6bb5\u3001\u53d1\u5c55\u5230\u4e8c\u9065\uff08\u9065\u4fe1 AI\u3001 \u9065\u6d4b DI\uff09\u3001\u4e09\u9065\uff08\u9065\u4fe1 AI\u3001\u9065\u6d4b DI \u548c\u9065\u63a7 DO\uff09\u3001\u56db\u9065\uff08\u9065\u4fe1 AI\u3001\u9065\u6d4b DI\u3001\u9065\u63a7 DO \u548c\u9065 \u8c03 AO\uff09\uff1b\u73b0\u5728\u5f00\u59cb\u56db\u9065\u5411\u4e94\u9065\u8fc7\u6e21\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u539f\u6587\u94fe\u63a5\uff1a",(0,s.jsx)(e.a,{href:"https://blog.csdn.net/LuohenYJ/article/details/106027626",children:"https://blog.csdn.net/LuohenYJ/article/details/106027626"})]}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u9605\u8bfb\u70b9\u8868\u65f6\uff0c\u8fd8\u4f1a\u78b0\u5230\u4e0b\u8868\u4e2d\u7684\u201cPLC/\u7ec4\u6001\u5730\u5740\u201d\uff0c\u6216\u8005\u8868\u4e2d\u7684\u7b80\u79f0\u201c0x\u30011x\u30014x\u3001 3x\u201d\uff0c \u5b83\u4eec\u7684\u672c\u8d28\u90fd\u662f\u7528\u6765\u5206\u8fa8\u201cAI\u3001AO\u3001DI\u3001DO\u201d\u56db\u7c7b\u5bc4\u5b58\u5668\uff1a"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u5bc4\u5b58\u5668\u79cd\u7c7b"}),(0,s.jsx)(e.th,{children:"PLC/\u7ec4\u6001\u5730\u5740"}),(0,s.jsx)(e.th,{children:"Modbus \u5bc4\u5b58\u5668\u5730\u5740\u8303\u56f4"}),(0,s.jsx)(e.th,{children:"\u7b80\u79f0"}),(0,s.jsx)(e.th,{children:"\u8bfb\u5199\u72b6\u6001"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u7ebf\u5708\u72b6\u6001"}),(0,s.jsx)(e.td,{children:"00001~09999"}),(0,s.jsx)(e.td,{children:"0000H~FFFFH"}),(0,s.jsx)(e.td,{children:"0x"}),(0,s.jsx)(e.td,{children:"\u53ef\u8bfb\u53ef\u5199"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u79bb\u6563\u8f93\u5165\u72b6\u6001"}),(0,s.jsx)(e.td,{children:"~10001 19999"}),(0,s.jsx)(e.td,{children:"0000H~FFFFH"}),(0,s.jsx)(e.td,{children:"1x"}),(0,s.jsx)(e.td,{children:"\u53ea\u8bfb"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u4fdd\u6301\u5bc4\u5b58\u5668"}),(0,s.jsx)(e.td,{children:"40001~49999"}),(0,s.jsx)(e.td,{children:"0000H~FFFFH"}),(0,s.jsx)(e.td,{children:"4x"}),(0,s.jsx)(e.td,{children:"\u53ef\u8bfb\u53ef\u5199"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u8f93\u5165\u5bc4\u5b58\u5668"}),(0,s.jsx)(e.td,{children:"~30001 39999"}),(0,s.jsx)(e.td,{children:"0000H~FFFFH"}),(0,s.jsx)(e.td,{children:"3x"}),(0,s.jsx)(e.td,{children:"\u53ea\u8bfb"})]})]})]}),"\n",(0,s.jsx)(e.p,{children:"\u70b9\u8868\u7684\u8bbe\u8ba1\uff0c\u662f\u5b8c\u5168\u7531\u5f00\u53d1\u4eba\u5458\u81ea\u884c\u5b9a\u4e49\u7684\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"1\u5f00\u5173\u91cf\u6a21\u5757switch",children:"1.\u5f00\u5173\u91cf\u6a21\u5757\uff08SWITCH\uff09"}),"\n",(0,s.jsx)(e.p,{children:"\u5bc4\u5b58\u5668\u8bf4\u660e\uff1a"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u8bbe\u5907\u5730\u5740"}),(0,s.jsx)(e.th,{children:"\u5bc4\u5b58\u5668\u5730\u5740"}),(0,s.jsx)(e.th,{children:"\u5bc4\u5b58\u5668\u7c7b\u522b"}),(0,s.jsx)(e.th,{children:"\u7528\u9014"}),(0,s.jsx)(e.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"01H"}),(0,s.jsx)(e.td,{children:"0000H"}),(0,s.jsx)(e.td,{children:"DI"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u6309\u952e KEY1"}),(0,s.jsx)(e.td,{children:"1-\u88ab\u6309\u4e0b"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0001H"}),(0,s.jsx)(e.td,{children:"DI"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u6309\u952e KEY2"}),(0,s.jsx)(e.td,{children:"1-\u88ab\u6309\u4e0b"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0002H"}),(0,s.jsx)(e.td,{children:"DI"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u6309\u952e KEY3"}),(0,s.jsx)(e.td,{children:"1-\u88ab\u6309\u4e0b"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0000H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u7ee7\u7535\u5668 1"}),(0,s.jsx)(e.td,{children:"1-\u5438\u5408"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0001H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u7ee7\u7535\u5668 2"}),(0,s.jsx)(e.td,{children:"1-\u5438\u5408"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0002H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236 LED1"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0003H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236 LED2"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0004H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236 LED3"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]})]})]}),"\n",(0,s.jsx)(e.h4,{id:"2-\u73af\u5883\u76d1\u6d4b\u6a21\u5757env_monitor",children:"2. \u73af\u5883\u76d1\u6d4b\u6a21\u5757\uff08ENV_MONITOR\uff09"}),"\n",(0,s.jsx)(e.p,{children:"\u5bc4\u5b58\u5668\u8bf4\u660e\uff1a"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u8bbe\u5907\u5730\u5740"}),(0,s.jsx)(e.th,{children:"\u5bc4\u5b58\u5668\u5730\u5740"}),(0,s.jsx)(e.th,{children:"\u5bc4\u5b58\u5668\u7c7b\u522b"}),(0,s.jsx)(e.th,{children:"\u7528\u9014"}),(0,s.jsx)(e.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"02H"}),(0,s.jsx)(e.td,{children:"0000H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u8702\u9e23\u5668 1"}),(0,s.jsx)(e.td,{children:"1-\u54cd"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0001H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u8702\u9e23\u5668 2"}),(0,s.jsx)(e.td,{children:"1-\u54cd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0002H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236 LED1"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0003H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236 LED2"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0004H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236 LED3"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0000H"}),(0,s.jsx)(e.td,{children:"AI"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u5149\u654f\u7535\u538b"}),(0,s.jsx)(e.td,{children:"0xfff \u5bf9\u5e94 3.3V12 \u4f4d\u7cbe\u5ea6"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0001H"}),(0,s.jsx)(e.td,{children:"AI"}),(0,s.jsx)(e.td,{children:"\u53ef\u8c03\u7535\u963b\u5668\u7535\u538b"}),(0,s.jsx)(e.td,{children:"0xfff \u5bf9\u5e94 3.3V12 \u4f4d\u7cbe\u5ea6"}),(0,s.jsx)(e.td,{})]})]})]}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsx)(e.li,{children:"\u6e29\u6e7f\u5ea6\u6a21\u5757\uff08TEMP HUMI\uff09"}),"\n"]}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u8bbe\u5907\u5730\u5740"}),(0,s.jsx)(e.th,{children:"\u5bc4\u5b58\u5668\u5730\u5740"}),(0,s.jsx)(e.th,{children:"\u5bc4\u5b58\u5668\u7c7b\u522b"}),(0,s.jsx)(e.th,{children:"\u7528\u9014"}),(0,s.jsx)(e.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"03H"}),(0,s.jsx)(e.td,{children:"0000H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u8702\u9e23\u5668 1"}),(0,s.jsx)(e.td,{children:"1-\u54cd"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0001H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u8702\u9e23\u5668 2"}),(0,s.jsx)(e.td,{children:"1-\u54cd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0002H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236 LED1"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0003H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236 LED2"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0004H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236 LED3"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0000H"}),(0,s.jsx)(e.td,{children:"AI"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u6e29\u5ea6"}),(0,s.jsx)(e.td,{children:"\u5355\u4f4d 0.1 \u6444\u6c0f\u5ea6 16 \u4f4d\u6709\u7b26\u53f7\u6574\u6570"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0001H"}),(0,s.jsx)(e.td,{children:"AI"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u6e7f\u5ea6"}),(0,s.jsx)(e.td,{children:"\u5355\u4f4d 0.1%RH16 \u4f4d\u6709\u7b26\u5408\u6574\u6570"}),(0,s.jsx)(e.td,{})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"764-\u5f00\u5173\u91cf\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1",children:"7.6.4 \u5f00\u5173\u91cf\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1"}),"\n",(0,s.jsx)(e.p,{children:"\u7ee7\u7535\u5668\u539f\u7406\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image26.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u7ee7\u7535\u5668\u5bf9\u5916\u7684\u4fe1\u53f7\u6709 3 \u4e2a\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"COM\uff1a\u516c\u5171\u7aef\uff0c\u901a\u5e38\u662f\u4e2d\u95f4\u7684\u89e6\u70b9\uff0c \u4e0e\u5e38\u5f00\u6216\u5e38\u95ed\u89e6\u70b9\u76f8\u8fde"}),"\n",(0,s.jsx)(e.li,{children:"NC\uff08Normally Closed\uff09\uff1a \u5e38\u95ed\u63a5\u53e3\uff0c\u7ee7\u7535\u5668\u5438\u5408\u524d\u4e0e COM \u8fde\u63a5\uff0c \u5438\u5408\u540e\u60ac\u7a7a"}),"\n",(0,s.jsx)(e.li,{children:"NO\uff08Normally Open\uff09\uff1a \u5e38\u5f00\u63a5\u53e3\uff0c \u7ee7\u7535\u5668\u5438\u5408\u524d\u60ac\u7a7a\uff0c \u5438\u5408\u540e\u4e0e COM \u8fde\u63a5"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5f00\u8def\u5373\u901a\u8def\u3001\u65ad\u8def\uff0c\u95ed\u5408\u6307\u7684\u662f\u5f00\u5173\u95ed\u5408\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c \u5728\u6ca1\u6709\u4efb\u4f55\u4e0a\u7535\u4e4b\u7c7b\u7684\u52a8\u4f5c\u65f6\uff0c NC \u548c COM \u7aef\u76f8\u5f53\u4e8e\u5df2\u7ecf\u8fde\u901a\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c 3_ \u7a0b \u5e8f\u6e90 \u7801\\01_ \u89c6 \u9891\u914d\u5957 \u7684 \u6e90 \u7801\\7-9_ \u5f00 \u5173 \u91cf \u4f20 \u611f \u5668 \u7a0b\u5e8f \u8bbe \u8ba1 \\f030_demo\u201d\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"765-\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1",children:"7.6.5 \u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1"}),"\n",(0,s.jsx)(e.h4,{id:"1-\u786c\u4ef6\u7535\u8def",children:"1. \u786c\u4ef6\u7535\u8def"}),"\n",(0,s.jsx)(e.p,{children:"\u5149\u654f\u7535\u8def\u5982\u4e0b\uff0c \u5149\u7167\u8d8a\u5f3a\uff0cU6 \u963b\u503c\u8d8a\u4f4e\uff0cOPTO_ADC \u7535\u538b\u503c\u5c31\u8d8a\u4f4e\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image27.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u53ef\u8c03\u7535\u963b\u5668\u5982\u4e0b\uff0cR33 \u963b\u503c\u8d8a\u5927\uff0cRES_ADC \u7535\u538b\u503c\u8d8a\u5c0f\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image28.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_ \u7a0b\u5e8f\u6e90\u7801\\01_ \u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-10_ \u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1 \\f030_demo\u201d\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"2-\u914d\u7f6e-gpio-\u548c-adc",children:"2. \u914d\u7f6e GPIO \u548c ADC"}),"\n",(0,s.jsx)(e.p,{children:"\u5148\u5728STM32CubmeMX\u91cc\u914d\u7f6eGPIO\u548cADC \u5f15\u811a\uff0c\u4f7f\u80fd\u201cDiscontinuous Conversion Mode \u201d\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image29.png",alt:"img"})}),"\n",(0,s.jsx)(e.h4,{id:"3-\u8bfb\u53d6-adc-\u7684\u5173\u952e\u4ee3\u7801",children:"3. \u8bfb\u53d6 ADC \u7684\u5173\u952e\u4ee3\u7801"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"// 1. \u68c0\u9a8c\nHAL_ADCEx_Calibration_Start(&hadc) ;\n\n// \u542f\u52a8\u3001\u8bfb2\u6b21\u6570\u503c\nfor (int i = 0; i < 2; i++)\n{\n    HAL_ADC_Start(&hadc);\n    if (HAL_OK == HAL_ADC_PollForConversion(&hadc, 100))\n    {\n    \tmb_mapping->tab_input_registers[i] = HAL_ADC_GetValue(&hadc); \n    }\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"766-\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1",children:"7.6.6 \u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c 3_ \u7a0b\u5e8f\u6e90\u7801\\01_ \u89c6\u9891\u914d\u5957 \u7684\u6e90\u7801\\7-11_ \u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7a0b\u5e8f\u8bbe\u8ba1 \\f030_demo\u201d\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"1-\u786c\u4ef6\u7535\u8def\u4e0e\u64cd\u4f5c\u65b9\u6cd5",children:"1. \u786c\u4ef6\u7535\u8def\u4e0e\u64cd\u4f5c\u65b9\u6cd5"}),"\n",(0,s.jsx)(e.p,{children:"\u539f\u7406\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image30.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"AHT20 \u82af\u7247\u8d44\u6599\u5728\u7f51\u76d8\u5982\u4e0b\u76ee\u5f55\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image31.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"AHT20 \u64cd\u4f5c\u65b9\u6cd5\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image32.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u8be6\u89e3\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u53d1\u9001\u6d4b\u91cf\u547d\u4ee4\uff1a\u4f20\u611f\u5668\u7684 VDD \u4e0a\u7535\u540e\u9700\u7b49\u5f85 5ms\uff0c \u53d1\u9001\u5199\u6d4b\u91cf\u547d\u4ee4 0x70 0xAC 0x330x00\uff0c \u7b49\u5f85 80ms \u6d4b\u91cf\u5b8c\u6210\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"\u83b7\u53d6\u6e29\u6e7f\u5ea6\u6821\u51c6\u6570\u636e\uff1a \u5728\u7b49\u5f85 80ms \u6d4b\u91cf\u5b8c\u6210\u540e\uff0c \u53d1\u9001 0x71 \u8bfb\u4f20\u611f\u5668\uff0c\u53ef\u83b7\u53d6\u72b6\u6001\u5b57 Status\u3001\u6e29\u6e7f\u5ea6\u6821\u51c6\u6570\u636e SRH[19:0]\u3001ST[19:0]\u4ee5\u53ca\u6821\u51c6\u5b57 CRC\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"\u6839\u636e\u516c\u5f0f\u8ba1\u7b97\u6e29\u6e7f\u5ea6\uff1a"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image33.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u8ba1\u7b97\u68c0\u9a8c\u7801\u7684\u51fd\u6570\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"//**********************************************************//\n//CRC\u6821\u9a8c\u7c7b\u578b\uff1a  CRC8\n//\u591a\u9879\u5f0f\uff1a  X8+X5+X4+1\n//Poly:0011 0001 0x31\nunsigned char Calc_CRC8(unsigned char *message,unsigned char Num)\n{\n    unsigned char i;\n    unsigned char byte;\n    unsigned char crc =0xFF;\n    for (byte = 0;byte<Num;byte++)\n    {\n        crc^=(message[byte]);\n        for(i=8;i>0;--i)\n        {\n            if(crc&0x80)\n            crc=(crc<<1)^0x31;\n            else\n            crc=(crc<<1);\n        }\n    }\n    return crc;\n}//\n**********************************************************//\n"})}),"\n",(0,s.jsx)(e.h4,{id:"2-\u914d\u7f6e-i2c",children:"2. \u914d\u7f6e I2C"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image34.png",alt:"img"})}),"\n",(0,s.jsx)(e.h4,{id:"3-\u8bfb\u53d6\u6e29\u6e7f\u5ea6\u5173\u952e\u4ee3\u7801",children:"3. \u8bfb\u53d6\u6e29\u6e7f\u5ea6\u5173\u952e\u4ee3\u7801"}),"\n",(0,s.jsx)(e.p,{children:"\u8bfb\u53d6\u4e00\u6b21\u6e29\u6e7f\u5ea6\u503c\uff0c \u8017\u65f6\u81f3\u5c11 80ms\u3002\u4e0d\u53ef\u80fd\u5728\u63a5\u6536\u5230modbus \u8bf7\u6c42\u540e\u518d\u53bb\u8bfb\u6e29\u6e7f\u5ea6\u3002\u800c \u662f\u4f7f\u7528\u53e6\u4e00\u4e2a\u4efb\u52a1\u4e0d\u65ad\u8bfb\u53d6\u6e29\u6e7f\u5ea6\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"HAL_StatusTypeDef HAL_I2C_Master_Transmit(I2C_HandleTypeDef *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size, uint32_t Timeout) ;\n\nHAL_StatusTypeDef HAL_I2C_Master_Receive(I2C_HandleTypeDef *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size, uint32_t Timeout) ;\n"})}),"\n",(0,s.jsx)(e.h2,{id:"77-\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668",children:"7.7 \u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668"}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u4e0b\u56fe\u8fde\u7ebf\uff0cH5\u63a7\u5236\u677f\u4f7f\u7528USB\u7ebf\u4f9b\u7535\uff0c\u4e2d\u95f4\u7684HUB\u4e5f\u4f7f\u7528USB\u4f9b\u7535\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image35.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fde\u63a5\u793a\u610f\u56fe\u4e3a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image36.png",alt:"img"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u6ce8\u610f"}),"\uff1a\u4e09\u4e2a\u4f20\u611f\u5668\u7684\u542f\u52a8\u5f00\u5173\u90fd\u62e8\u5230\u201cON\u201d\u4f4d\u7f6e\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"771-\u4e3b\u63a7\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668",children:"7.7.1 \u4e3b\u63a7\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_\u7a0b\u5e8f\u6e90\u7801\\01_\u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-12_\u4e3b\u63a7\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668\\h5_demo\u3001f030_demo\u201d\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6ce8\u610f\uff1af030_demo\u9700\u8981\u5206\u522b\u8bbe\u7f6e\u4e0b\u9762\u7684\u5b8f\uff08\u8fd93\u4e2a\u5b8f\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u5b9a\u4e49\u4e00\u4e2a\uff09\uff0c\u7f16\u8bd1\u51fa\u7a0b\u5e8f\u540e\u5206\u522b\u70e7\u5199\u52303\u4e2a\u4f20\u611f\u5668\u91cc\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"#define USE_SWITCH_SENSOR 1\n#define USE_ENV_MONITOR_SENSOR 1\n#define USE_TMP_HUMI_SENSOR 1\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u7f16\u5199H5\u4e3b\u63a7\u7a0b\u5e8f\uff0c\u4e3a\u6bcf\u4e2a485\u901a\u9053\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\uff0c\u4efb\u52a1\u91cc\u521b\u5efamodbus\u7ed3\u6784\u4f53\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4efb\u52a11\uff1a\u4f7f\u7528CH1\uff0c\u8bbf\u95ee\u5f00\u5173\u91cf\u4f20\u611f\u5668\u3001\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\uff0c\u5728LCD\u4e0a\u663e\u793a\u6570\u636e"}),"\n",(0,s.jsx)(e.li,{children:"\u4efb\u52a12\uff1a\u4f7f\u7528CH2\uff0c\u8bbf\u95ee\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\uff0c\u5728LCD\u4e0a\u663e\u793a\u6570\u636e"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u56e0\u4e3a\u4efb\u52a11\u3001\u4efb\u52a12\u90fd\u8bbf\u95eeLCD\uff0c\u5728LCD\u51fd\u6570\u91cc\u8981\u52a0\u5165\u4e92\u65a5\u63aa\u65bd\uff0c\u5426\u5219LCD\u4f1a\u82b1\u5c4f\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"772-\u4e0a\u4f4d\u673a\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668",children:"7.7.2 \u4e0a\u4f4d\u673a\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_\u7a0b\u5e8f\u6e90\u7801\\01_\u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-13 \u4e0a\u4f4d\u673a\u8bbf\u95ee\u591a\u4e2a\u4f20\u611f\u5668\\h5_demo\u3001f030_demo\u201d\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6ce8\u610f\uff1af030_demo\u9700\u8981\u5206\u522b\u8bbe\u7f6e\u4e0b\u9762\u7684\u5b8f\uff08\u8fd93\u4e2a\u5b8f\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u5b9a\u4e49\u4e00\u4e2a\uff09\uff0c\u7f16\u8bd1\u51fa\u7a0b\u5e8f\u540e\u5206\u522b\u70e7\u5199\u52303\u4e2a\u4f20\u611f\u5668\u91cc\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"#define USE_SWITCH_SENSOR 1\n#define USE_ENV_MONITOR_SENSOR 1\n#define USE_TMP_HUMI_SENSOR 1\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u4e0a\u4f4d\u673a\u7684\u89d2\u5ea6\uff0c\u5b83\u53ea\u770b\u5230H5\u4e3b\u63a7\u677f\u4e00\u4e2aModbus\u8bbe\u5907\u3002\u4e0a\u4f4d\u673a\u600e\u4e48\u53bb\u8bbf\u95ee\u63a5\u5728H5\u4e0a\u7684\u5176\u4ed63\u4e2a\u4f20\u611f\u5668\uff1f\u8fd9\u91cc\u9700\u8981\u8fdb\u884c\u201c\u6620\u5c04\u201d\uff1a\u4e0a\u4f4d\u673a\u8bfb\u5199H5\u7684\u67d0\u4e2a\u5bc4\u5b58\u5668\uff0c\u5176\u5b9e\u662f\u53bb\u8bfb\u5199\u67d0\u4e2a\u4f20\u611f\u5668\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u4f7f\u7528\u4e00\u4e2a\u56fa\u5b9a\u7684\u6620\u5c04\u70b9\u8868\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"H5\u8bbe\u5907\u5730\u5740"}),(0,s.jsx)(e.th,{children:"H5\u5bc4\u5b58\u5668\u5730\u5740"}),(0,s.jsx)(e.th,{children:"H5\u5bc4\u5b58\u5668\u7c7b\u522b"}),(0,s.jsx)(e.th,{children:"\u6620\u5c04"}),(0,s.jsx)(e.th,{children:"\u7528\u9014"}),(0,s.jsx)(e.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"01H"}),(0,s.jsx)(e.td,{children:"0000H"}),(0,s.jsx)(e.td,{children:"DI"}),(0,s.jsx)(e.td,{children:"CH1ID=1DI\u5bc4\u5b58\u56680"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u5f00\u5173\u91cf\u4f20\u611f\u5668\u7684\u6309\u952eKEY1"}),(0,s.jsx)(e.td,{children:"1-\u88ab\u6309\u4e0b"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0001H"}),(0,s.jsx)(e.td,{children:"DI"}),(0,s.jsx)(e.td,{children:"CH1ID=1DI\u5bc4\u5b58\u56681"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u5f00\u5173\u91cf\u4f20\u611f\u5668\u7684\u6309\u952eKEY2"}),(0,s.jsx)(e.td,{children:"1-\u88ab\u6309\u4e0b"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0002H"}),(0,s.jsx)(e.td,{children:"DI"}),(0,s.jsx)(e.td,{children:"CH1ID=1DI\u5bc4\u5b58\u56682"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u5f00\u5173\u91cf\u4f20\u611f\u5668\u7684\u6309\u952eKEY3"}),(0,s.jsx)(e.td,{children:"1-\u88ab\u6309\u4e0b"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0000H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"H5\u7684LED"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236H5\u7684LED"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0001H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH1ID=1DO\u5bc4\u5b58\u56680"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u5f00\u5173\u91cf\u4f20\u611f\u5668\u7684\u7ee7\u7535\u56681"}),(0,s.jsx)(e.td,{children:"1-\u5438\u5408"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0002H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH1ID=1DO\u5bc4\u5b58\u56681"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u5f00\u5173\u91cf\u4f20\u611f\u5668\u7684\u7ee7\u7535\u56682"}),(0,s.jsx)(e.td,{children:"1-\u5438\u5408"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0003H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH1ID=1DO\u5bc4\u5b58\u56682"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u5f00\u5173\u91cf\u4f20\u611f\u5668\u7684LED1"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0004H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH1ID=1DO\u5bc4\u5b58\u56683"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u5f00\u5173\u91cf\u4f20\u611f\u5668\u7684LED2"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0005H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH1ID=1DO\u5bc4\u5b58\u56684"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u5f00\u5173\u91cf\u4f20\u611f\u5668\u7684LED3"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0006H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH1ID=2DO\u5bc4\u5b58\u56680"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7684\u8702\u9e23\u56681"}),(0,s.jsx)(e.td,{children:"1-\u54cd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0007H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH1ID=2DO\u5bc4\u5b58\u56681"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7684\u8702\u9e23\u56682"}),(0,s.jsx)(e.td,{children:"1-\u54cd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0008H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH1ID=2DO\u5bc4\u5b58\u56682"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7684LED1"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0009H"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH1ID=2DO\u5bc4\u5b58\u56683"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7684LED2"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"000AH"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH1ID=2DO\u5bc4\u5b58\u56684"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7684LED3"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"000BH"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH2ID=3DO\u5bc4\u5b58\u56680"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7684\u8702\u9e23\u56681"}),(0,s.jsx)(e.td,{children:"1-\u54cd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"000CH"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH2ID=3DO\u5bc4\u5b58\u56681"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7684\u8702\u9e23\u56682"}),(0,s.jsx)(e.td,{children:"1-\u54cd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"000DH"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH2ID=3DO\u5bc4\u5b58\u56682"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7684LED1"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"000EH"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH2ID=3DO\u5bc4\u5b58\u56683"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7684LED2"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"000FH"}),(0,s.jsx)(e.td,{children:"DO"}),(0,s.jsx)(e.td,{children:"CH2ID=3DO\u5bc4\u5b58\u56684"}),(0,s.jsx)(e.td,{children:"\u63a7\u5236\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7684LED3"}),(0,s.jsx)(e.td,{children:"1-\u4eae"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0000H"}),(0,s.jsx)(e.td,{children:"AI"}),(0,s.jsx)(e.td,{children:"CH1ID=2AI\u5bc4\u5b58\u56680"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7684\u5149\u654f\u7535\u538b"}),(0,s.jsx)(e.td,{children:"0xfff\u5bf9\u5e943.3V12\u4f4d\u7cbe\u5ea6"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0001H"}),(0,s.jsx)(e.td,{children:"AI"}),(0,s.jsx)(e.td,{children:"CH1ID=2AI\u5bc4\u5b58\u56681"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\u7684\u53ef\u8c03\u7535\u963b\u5668\u7535\u538b"}),(0,s.jsx)(e.td,{children:"0xfff\u5bf9\u5e943.3V12\u4f4d\u7cbe\u5ea6"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0002H"}),(0,s.jsx)(e.td,{children:"AI"}),(0,s.jsx)(e.td,{children:"CH2ID=3AI\u5bc4\u5b58\u56680"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7684\u6e29\u5ea6"}),(0,s.jsx)(e.td,{children:"\u5355\u4f4d0.1\u6444\u6c0f\u5ea616\u4f4d\u6709\u7b26\u53f7\u6574\u6570"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"0003H"}),(0,s.jsx)(e.td,{children:"AI"}),(0,s.jsx)(e.td,{children:"CH2ID=3AI\u5bc4\u5b58\u56681"}),(0,s.jsx)(e.td,{children:"\u8bfb\u53d6\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u7684\u6e7f\u5ea6"}),(0,s.jsx)(e.td,{children:"\u5355\u4f4d0.1%RH16\u4f4d\u6709\u7b26\u5408\u6574\u6570"}),(0,s.jsx)(e.td,{})]})]})]}),"\n",(0,s.jsx)(e.p,{children:"\u7f16\u5199H5\u4e3b\u63a7\u7a0b\u5e8f\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4efb\u52a11\uff1a\u521b\u5efa\u4e00\u4e2aModbus\u8bbe\u5907\uff0c\u5206\u914dmodbus_mapping_t\uff0c\u8bfb\u53d6PC\u53d1\u6765\u7684\u8bf7\u6c42\u5e76\u8fdb\u884c\u56de\u5e94"}),"\n",(0,s.jsx)(e.li,{children:"\u4efb\u52a12\uff1a\u4f7f\u7528CH1\u8bbf\u95ee\u5f00\u5173\u91cf\u4f20\u611f\u5668\uff08ID=1\uff09\uff0c\u5728modbus_mapping_t\u548c\u4f20\u611f\u5668\u4e4b\u95f4\u4f20\u9012\u6570\u636e\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u4efb\u52a13\uff1a\u4f7f\u7528CH1\u8bbf\u95ee\u73af\u5883\u76d1\u6d4b\u4f20\u611f\u5668\uff08ID=2\uff09\uff0c\u5728modbus_mapping_t\u548c\u4f20\u611f\u5668\u4e4b\u95f4\u4f20\u9012\u6570\u636e\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u4efb\u52a14\uff1a\u4f7f\u7528CH2\u8bbf\u95ee\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\uff08ID=3\uff09\uff0c\u5728modbus_mapping_t\u548c\u4f20\u611f\u5668\u4e4b\u95f4\u4f20\u9012\u6570\u636e\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7a0b\u5e8f\u6846\u56fe\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image37.png",alt:"img"})}),"\n",(0,s.jsx)(e.h2,{id:"78-\u7a0b\u5e8f\u6539\u8fdb",children:"7.8 \u7a0b\u5e8f\u6539\u8fdb"}),"\n",(0,s.jsx)(e.h3,{id:"781-\u4e3b\u63a7uart\u4ee3\u7801\u7684\u66f4\u597d\u5c01\u88c5",children:"7.8.1 \u4e3b\u63a7UART\u4ee3\u7801\u7684\u66f4\u597d\u5c01\u88c5"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_\u7a0b\u5e8f\u6e90\u7801\\01_\u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-14_\u4e3b\u63a7UART\u4ee3\u7801\u7684\u66f4\u597d\u5c01\u88c5\\h5_demo\u3001f030_demo\u201d\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5bf9\u4e8e\u540c\u4e00\u6b3e\u82af\u7247\u4e0a\u9762\u7684\u591a\u4e2aUART\uff0c\u5b83\u4eec\u7684\u64cd\u4f5c\u4ee3\u7801\u662f\u7c7b\u4f3c\u7684\uff0c\u6ca1\u6709\u5fc5\u8981\u4e3a\u5404\u4e2aUART\u5355\u72ec\u63d0\u4f9b\u51fd\u6570\uff0c\u5982\u4e0b\u4ee3\u7801\u6709\u6539\u8fdb\u7a7a\u95f4\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:'struct UART_Device g_uart2_dev = {"uart2", UART2_Rx_Start, UART2_Send, UART2_GetData, UART2_Flush};\nstruct UART_Device g_uart4_dev = {"uart4", UART4_Rx_Start, UART4_Send, UART4_GetData, UART4_Flush};\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4ee5UART2_Rx_Start\u3001UART4_Rx_Start\u4e3a\u4f8b\uff0c\u5b83\u4eec\u7684\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image38.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image39.png",alt:"img"})}),"\n",(0,s.jsx)(e.p,{children:"\u5b83\u4eec\u7684\u529f\u80fd\u662f\u7c7b\u4f3c\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u5957\u51fd\u6570UART_Rx_Start\uff0c\u5173\u952e\u662f\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5982\u4f55\u5206\u8fa8\u5b83\u8981\u64cd\u4f5c\u54ea\u4e2aUART\uff1f\u53ea\u80fd\u5728\u7b2c1\u4e2a\u53c2\u6570\u91cc\u8fdb\u884c\u5206\u8fa8"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u4f55\u8bb0\u5f55\u521b\u5efa\u7684\u961f\u5217\u3001\u4fe1\u53f7\u91cf\uff1f\u6700\u597d\u5b58\u5728\u7b2c1\u4e2a\u53c2\u6570\u91cc"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6240\u4ee5\uff0c\u9700\u8981\u5bf9UART_Device\u7ed3\u6784\u4f53\u8fdb\u884c\u6269\u5c55\uff0c\u6dfb\u52a0\u201c\u79c1\u6709\u6570\u636e\u201d\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"typedef struct UART_Device {\n      char *name;\n      int (*Init)( struct UART_Device *pDev, int baud, char parity, int data_bit, int stop_bit);\n      int (*Send)( struct UART_Device *pDev, uint8_t *datas, uint32_t len, int timeout);\n      int (*RecvByte)( struct UART_Device *pDev, uint8_t *data, int timeout);\n      int (*Flush)(struct UART_Device *pDev);\n      void *priv_data;\n}UART_Device, *PUART_Device;\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u8ff0\u201cpriv_data\u201d\u5c06\u6307\u5411\u8bbe\u5907\u76f8\u5173\u7684\u7ed3\u6784\u4f53\uff0c\u6bd4\u5982\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"#define RX_BUF_LEN 1000\ntypedef struct UART_Data {\n\n      UART_HandleTypeDef *huart;\n      SemaphoreHandle_t txSemaphore;\n      QueueHandle_t rxQueue;\n      uint8_t rx_buf[RX_BUF_LEN];\n\n}UART_Data, *PUART_Data;\n\nstatic struct UART_Data g_uart1_data = {\n      &huart1,\n};\n\nstatic struct UART_Data g_uart2_data = {\n      &huart2,\n};\n\nstatic struct UART_Data g_uart4_data = {\n      &huart4,\n};\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u7136\u540e\uff0c\u5c31\u53ef\u4ee5\u5982\u6b64\u5b9e\u73b0\u51fd\u6570\u4e86\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-C",children:'UART_Device g_uart1_dev = {"uart1", UART_Rx_Start, UART_Send, UART_GetData, UART_Flush, &g_uart1_data};\nUART_Device g_uart2_dev = {"uart2", UART_Rx_Start, UART_Send, UART_GetData, UART_Flush, &g_uart2_data};\nUART_Device g_uart4_dev = {"uart4", UART_Rx_Start, UART_Send, UART_GetData, UART_Flush, &g_uart4_data};\n\nint UART_Rx_Start(PUART_Device pDev, int baud, char parity, int data_bit, int stop_bit)\n{\n    PUART_Data data = pDev->priv_data;\n      \n\tif (!data->rxQueue)\n      {\n\t\tdata->rxQueue = xQueueCreate(200, 1);\n\t\tdata->txSemaphore = xSemaphoreCreateBinary();\n\t\t\n\t\tHAL_UARTEx_ReceiveToIdle_DMA(data->huart, data->rx_buf, RX_BUF_LEN);\n\t\t//HAL_UARTEx_ReceiveToIdle_IT(data->huart, data->rx_buf, 1);\n      }\n      return 0;\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"782-\u589e\u52a0\u5bb9\u9519\u4ee3\u7801",children:"7.8.2 \u589e\u52a0\u5bb9\u9519\u4ee3\u7801"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u6e90\u7801\u4e3a\u201c3_\u7a0b\u5e8f\u6e90\u7801\\01_\u89c6\u9891\u914d\u5957\u7684\u6e90\u7801\\7-15_\u589e\u52a0\u5bb9\u9519\u4ee3\u7801\\h5_demo\u3001f030_demo\u201d\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"1-\u6dfb\u52a0uart\u9519\u8bef\u6062\u590d\u4ee3\u7801",children:(0,s.jsx)(e.strong,{children:"1. \u6dfb\u52a0UART\u9519\u8bef\u6062\u590d\u4ee3\u7801"})}),"\n",(0,s.jsx)(e.p,{children:"\u65e0\u8bba\u662f\u4e3b\u63a7\u7a0b\u5e8f\u8fd8\u662f\u4f20\u611f\u5668\u7a0b\u5e8f\uff0c\u4f7f\u7528UART\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u662f\u672c\u9879\u76ee\u7684\u5173\u952e\u3002\u5982\u679c\u53d1\u751f\u4e86UART\u9519\u8bef\uff0c\u5e94\u8be5\u80fd\u4ece\u9519\u8bef\u4e2d\u6062\u590d\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u9519\u8bef\u4e2d\u65ad\u56de\u8c03\u51fd\u6570\u91cc\uff0c\u91cd\u65b0\u521d\u59cb\u5316UART\u3001\u91cd\u65b0\u542f\u52a8\u6570\u636e\u63a5\u6536\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-C",children:"void HAL_UART_ErrorCallback(UART_HandleTypeDef *huart)\n{\n      PUART_Data data = NULL;\n\n      if (huart == &huart1)\n      {\n        data = &g_uart1_data;\n      }\n\n      if (huart == &huart2)\n      {\n        data = &g_uart2_data;\n      }\n\n      if (huart == &huart4)\n      {\n        data = &g_uart4_data;\n      }\n\n      if (data)\n      {\n        HAL_UART_DeInit(data->huart);\n        HAL_UART_Init(data->huart);\n\t\n        /* re-start DMA+IDLE rx */\n        HAL_UARTEx_ReceiveToIdle_DMA(data->huart, data->rx_buf, RX_BUF_LEN);\n        //HAL_UARTEx_ReceiveToIdle_IT(data->huart, data->rx_buf, 1);\n      }\n}\n"})}),"\n",(0,s.jsx)(e.h4,{id:"2-\u8c03\u6574libmodbus\u7684\u8d85\u65f6\u65f6\u95f4",children:(0,s.jsx)(e.strong,{children:"2. \u8c03\u6574libmodbus\u7684\u8d85\u65f6\u65f6\u95f4"})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u4e0b\u4fee\u6539\u201cMiddlewares\\Third_Party\\libmodbus\\modbus-private.h\u201d\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-C",children:"#define _RESPONSE_TIMEOUT 10000\n#define _BYTE_TIMEOUT   10000\n"})}),"\n",(0,s.jsx)(e.h4,{id:"3-\u4e3b\u63a7\u53d1\u51falibmodbus\u8bf7\u6c42\u7684\u95f4\u9694\u52a0\u5927",children:(0,s.jsx)(e.strong,{children:"3. \u4e3b\u63a7\u53d1\u51falibmodbus\u8bf7\u6c42\u7684\u95f4\u9694\u52a0\u5927"})}),"\n",(0,s.jsx)(e.p,{children:"\u83b7\u5f97\u9501\u4e4b\u540e\uff0c\u7b49\u5f85\u4e00\u4f1a\u518d\u53d1\u9001Modbus\u8bf7\u6c42\uff0c\u4ee5\u4fbf\u8ba9\u4ece\u673a\u8d85\u65f6\u9000\u51fa\u5e76\u8fdb\u5165\u65b0\u4e00\u8f6e\u7684\u7b49\u5f85\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter8/image40.png",alt:"img"})})]})}function j(d={}){const{wrapper:e}={...(0,t.a)(),...d.components};return e?(0,s.jsx)(e,{...d,children:(0,s.jsx)(x,{...d})}):x(d)}},1151:(d,e,n)=>{n.d(e,{Z:()=>c,a:()=>r});var s=n(7294);const t={},i=s.createContext(t);function r(d){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof d?d(e):{...e,...d}}),[e,d])}function c(d){let e;return e=d.disableParentContext?"function"==typeof d.components?d.components(t):d.components||t:r(d.components),s.createElement(i.Provider,{value:e},d.children)}}}]);