"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[129],{3252:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>r,default:()=>j,frontMatter:()=>c,metadata:()=>h,toc:()=>d});var i=s(5893),l=s(1151);const c={sidebar_position:5},r="4.4 USB \u534f\u8bae\u5c42\u6570\u636e\u683c\u5f0f",h={id:"Modbus-projectOne/chapter5/chapter5.4",title:"4.4 USB \u534f\u8bae\u5c42\u6570\u636e\u683c\u5f0f",description:"\u53c2\u8003\u8d44\u6599\uff1a",source:"@site/docs/Modbus-projectOne/chapter5/chapter5.4.md",sourceDirName:"Modbus-projectOne/chapter5",slug:"/Modbus-projectOne/chapter5/chapter5.4",permalink:"/en/Modbus-projectOne/chapter5/chapter5.4",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/Modbus-TrainingDocs/tree/main/docs/Modbus-projectOne/chapter5/chapter5.4.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"modbustrainoneSidebar",previous:{title:"4.3 \u8f6f\u4ef6\u5de5\u7a0b\u5e08\u773c\u91cc\u7684 USB \u7535\u6c14\u4fe1\u53f7",permalink:"/en/Modbus-projectOne/chapter5/chapter5.3"},next:{title:"4.5 USB \u63cf\u8ff0\u7b26",permalink:"/en/Modbus-projectOne/chapter5/chapter5.5"}},t={},d=[{value:"4.4.1 \u786c\u4ef6\u62d3\u6251\u7ed3\u6784",id:"441-\u786c\u4ef6\u62d3\u6251\u7ed3\u6784",level:3},{value:"4.4.2 \u534f\u8bae\u5c42",id:"442-\u534f\u8bae\u5c42",level:3},{value:"4.4.3 \u5b57\u8282/\u4f4d\u4f20\u8f93\u987a\u5e8f",id:"443-\u5b57\u8282\u4f4d\u4f20\u8f93\u987a\u5e8f",level:3},{value:"4.4.4 SYNC \u57df",id:"444-sync-\u57df",level:3},{value:"4.4.5\u5305\u683c\u5f0f",id:"445\u5305\u683c\u5f0f",level:3},{value:"1. PID \u57df",id:"1-pid-\u57df",level:4},{value:"2. \u4ee4\u724c\u5305(Token)",id:"2-\u4ee4\u724c\u5305token",level:4},{value:"3. \u6570\u636e\u5305",id:"3-\u6570\u636e\u5305",level:4},{value:"4. \u63e1\u624b\u5305",id:"4-\u63e1\u624b\u5305",level:4},{value:"4.4.6 \u4f20\u8f93\u7ec6\u8282",id:"446-\u4f20\u8f93\u7ec6\u8282",level:3},{value:"1. \u4f20\u8f93(Transfer)\u548c\u4e8b\u52a1(Transaction)",id:"1-\u4f20\u8f93transfer\u548c\u4e8b\u52a1transaction",level:4},{value:"2. \u8fc7\u7a0b(stage)\u548c\u9636\u6bb5(phase)",id:"2-\u8fc7\u7a0bstage\u548c\u9636\u6bb5phase",level:4},{value:"3. \u6279\u91cf\u4f20\u8f93",id:"3-\u6279\u91cf\u4f20\u8f93",level:4},{value:"4.\u4e2d\u65ad\u4f20\u8f93",id:"4\u4e2d\u65ad\u4f20\u8f93",level:4},{value:"5.\u5b9e\u65f6\u4f20\u8f93",id:"5\u5b9e\u65f6\u4f20\u8f93",level:4},{value:"6. \u63a7\u5236\u4f20\u8f93",id:"6-\u63a7\u5236\u4f20\u8f93",level:4},{value:"4.4.7 \u4f7f\u7528\u5de5\u5177\u4f53\u9a8c\u6570\u636e\u683c\u5f0f",id:"447-\u4f7f\u7528\u5de5\u5177\u4f53\u9a8c\u6570\u636e\u683c\u5f0f",level:3}];function p(n){const e={a:"a",h1:"h1",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",ul:"ul",...(0,l.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"44-usb-\u534f\u8bae\u5c42\u6570\u636e\u683c\u5f0f",children:"4.4 USB \u534f\u8bae\u5c42\u6570\u636e\u683c\u5f0f"}),"\n",(0,i.jsx)(e.p,{children:"\u53c2\u8003\u8d44\u6599\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u300a\u5708\u5708\u6559\u4f60\u73a9 USB\u300b"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u7b80\u4e66 ",(0,i.jsx)(e.a,{href:"mailto:jianshu_kevin@126.com",children:"jianshu_kevin@126.com"})," \u7684\u6587\u7ae0"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.jianshu.com/p/3afc1eb5bd32",children:"https://www.jianshu.com/p/3afc1eb5bd32"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.jianshu.com/p/cf8e7df5ff09",children:"https://www.jianshu.com/p/cf8e7df5ff09"})}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://www.jianshu.com/p/2a6e22194cd3",children:"USB \u534f\u8bae(\u4e09)\uff1a"}),(0,i.jsx)(e.a,{href:"https://www.jianshu.com/p/2a6e22194cd3",children:"https://www.jianshu.com/p/2a6e22194cd3"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5b98\u7f51\uff1a",(0,i.jsx)(e.a,{href:"https://www.usb.org/documents",children:"https://www.usb.org/documents"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image23.png",alt:"img"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u300ausb_20.pdf\u300b\u7684\u300achapter5 8 Protocol Layer\u300b"}),"\n",(0,i.jsxs)(e.li,{children:["USB \u7684 NRZI \u4fe1\u53f7\u683c\u5f0f\uff1a ",(0,i.jsx)(e.a,{href:"https://zhuanlan.zhihu.com/p/460018993",children:"https://zhuanlan.zhihu.com/p/460018993"})]}),"\n",(0,i.jsxs)(e.li,{children:["USB2.0 \u5305 Packet \u7684\u7ec4\u6210\uff1a ",(0,i.jsx)(e.a,{href:"https://www.usbzh.com/article/detail-459.html",children:"https://www.usbzh.com/article/detail-459.html"})]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"441-\u786c\u4ef6\u62d3\u6251\u7ed3\u6784",children:"4.4.1 \u786c\u4ef6\u62d3\u6251\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image24.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"compound device \uff1a\u591a\u4e2a\u8bbe\u5907\u7ec4\u5408\u8d77\u6765\uff0c\u901a\u8fc7 HUB \u8ddf Host \u76f8\u8fde"}),"\n",(0,i.jsx)(e.p,{children:"composite device \uff1a\u4e00\u4e2a\u7269\u7406\u8bbe\u5907\u6709\u591a\u4e2a\u903b\u8f91\u8bbe\u5907(multiple interfaces)"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u8f6f\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c \u6211\u4eec\u53ef\u4ee5\u5ffd\u7565 Hub \u7684\u5b58\u5728\uff0c\u786c\u4ef6\u62d3\u6251\u56fe\u7b80\u5316\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image25.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u7269\u7406\u8bbe\u5907\u91cc\u9762\u53ef\u80fd\u6709\u591a\u4e2a\u903b\u8f91\u8bbe\u5907\uff0c Hos \u53ef\u4ee5\u5916\u63a5\u591a\u4e2a\u903b\u8f91\u8bbe\u5907\uff0c \u786c\u4ef6\u62d3\u6251\u56fe\u5982 \u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image26.png",alt:"img"})}),"\n",(0,i.jsx)(e.h3,{id:"442-\u534f\u8bae\u5c42",children:"4.4.2 \u534f\u8bae\u5c42"}),"\n",(0,i.jsx)(e.p,{children:"\u8981\u7406\u89e3\u534f\u8bae\u5c42\u3001\u7406\u89e3\u6570\u636e\u5982\u4f55\u4f20\u8f93\uff0c\u5e26\u7740\u8fd9\u51e0\u4e2a\u95ee\u9898\u53bb\u770b\u6587\u6863\u3001\u770b\u89c6\u9891\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u4f55\u5bfb\u5740\u8bbe\u5907\uff1f"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u4f55\u8868\u793a\u6570\u636e\u65b9\u5411(\u8bfb\u3001\u8fd8\u662f\u5199)"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u4f55\u786e\u8ba4\u7ed3\u679c\uff1f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u63d0\u524d\u7f57\u5217\u51fa\u7b54\u6848\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["USB \u7cfb\u7edf\u662f\u4e00\u4e2a Host \u5bf9\u5e94\u591a\u4e2a\u8bbe\u5907\uff0c \u8981\u4f20\u8f93\u6570\u636e\u9996\u5148\u8981\u901a\u77e5\u8bbe\u5907\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53d1\u51fa IN \u4ee4\u724c\u5305\uff1a \u8868\u793a\u60f3\u8bfb\u6570\u636e\uff0c\u91cc\u9762\u542b\u6709\u8bbe\u5907\u5730\u5740"}),"\n",(0,i.jsx)(e.li,{children:"\u53d1\u51fa OUT \u4ee4\u724c\u5305\uff1a\u8868\u793a\u60f3\u5199\u6570\u636e\uff0c \u91cc\u9762\u542b\u6709\u8bbe\u5907\u5730\u5740"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6570\u636e\u9636\u6bb5\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Host \u60f3\u8bfb\u6570\u636e\uff1a \u524d\u9762\u53d1\u51fa IN \u4ee4\u724c\u5305\u540e\uff0c \u73b0\u5728\u8bfb\u53d6\u6570\u636e\u5305"}),"\n",(0,i.jsx)(e.li,{children:"Host \u60f3\u53d1\u51fa\u6570\u636e\uff1a\u524d\u9762\u53d1\u51fa OUT \u4ee4\u724c\u5305\u540e\uff0c \u73b0\u5728\u53d1\u51fa\u6570\u636e\u5305"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7ed3\u679c\u5982\u4f55\uff1f\u6709\u63e1\u624b\u5305","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Host \u60f3\u8bfb\u6570\u636e\uff0c \u8bbe\u5907\u53ef\u80fd\u672a\u5c31\u7eea\uff0c \u5c31\u4f1a\u56de\u5e94 NAK \u5305"}),"\n",(0,i.jsx)(e.li,{children:"Host \u60f3\u5199\u6570\u636e\uff0c \u5b83\u53d1\u51fa\u6570\u636e\u540e\uff0c\u8bbe\u5907\u6b63\u786e\u63a5\u6536\u4e86\uff0c \u5c31\u56de\u590d ACK \u5305"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"443-\u5b57\u8282\u4f4d\u4f20\u8f93\u987a\u5e8f",children:"4.4.3 \u5b57\u8282/\u4f4d\u4f20\u8f93\u987a\u5e8f"}),"\n",(0,i.jsx)(e.p,{children:"\u5148\u4f20\u8f93\u6700\u4f4e\u4f4d(LSB)\u3002\u5728\u540e\u7eed\u6587\u6863\u4e2d\uff0c\u63cf\u8ff0\u6570\u636e\u65f6\u6309\u7167\u4f20\u8f93\u987a\u5e8f\u4ece\u5de6\u5230\u53f3\u5217\u51fa\u6765"}),"\n",(0,i.jsx)(e.h3,{id:"444-sync-\u57df",children:"4.4.4 SYNC \u57df"}),"\n",(0,i.jsx)(e.p,{children:'Host \u53d1\u51fa SOP \u4fe1\u53f7\u540e\uff0c \u5c31\u4f1a\u53d1\u51fa SYNC \u4fe1\u53f7\uff1a\u5b83\u662f\u4e00\u7cfb\u5217\u7684\u3001\u6700\u5927\u4f20\u8f93\u9891\u7387\u7684\u8109\u51b2\uff0c\u63a5  \u6536\u65b9\u4f7f\u7528\u5b83\u6765\u540c\u6b65\u6570\u636e\u3002\u5bf9\u4e8e\u4f4e\u901f/\u5168\u901f\u8bbe\u5907\uff0c SYNC\u4fe1\u53f7\u662f8\u4f4d\u6570\u636e(\u4ece\u505a\u5230\u53f3\u662f00000001)\uff1b \u5bf9\u4e8e\u9ad8\u901f\u8bbe\u5907\uff0c SYNC\u4fe1\u53f7\u662f32\u4f4d\u6570\u636e(\u4ece\u5de6\u5230\u53f3\u662f00000000000000000000000000000001)\u3002 \u4f7f\u7528 NRZI \u7f16\u7801\u65f6\uff0c\u524d\u9762\u6bcf\u4e2a"0"\u90fd\u5bf9\u5e94\u4e00\u4e2a\u8df3\u53d8\u3002'}),"\n",(0,i.jsx)(e.p,{children:'\u5728\u5f88\u591a\u6587\u6863\u91cc\uff0c \u628a SOP \u548c SYNC \u7edf\u4e00\u79f0\u4e3a"SYNC"\uff0c\u5b83\u7684\u610f\u601d\u662f"SYNC"\u4e2d\u542b\u6709"SOP"\u3002'}),"\n",(0,i.jsx)(e.h3,{id:"445\u5305\u683c\u5f0f",children:"4.4.5\u5305\u683c\u5f0f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image27.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:'USB \u603b\u7ebf\u4e0a\u4f20\u8f93\u7684\u6570\u636e\u4ee5\u5305\u4e3a\u5355\u4f4d\u3002 USB \u5305\u91cc\u542b\u6709\u54ea\u4e9b\u5185\u5bb9("\u57df")\uff1f'}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"SOP\uff1a\u7528\u6765\u8868\u793a\u5305\u7684\u8d77\u59cb"}),"\n",(0,i.jsx)(e.li,{children:"SYNC\uff1a\u7528\u6765\u540c\u6b65\u65f6\u949f"}),"\n",(0,i.jsx)(e.li,{children:"PID\uff1a\u8868\u793a\u5305\u7684\u7c7b\u578b"}),"\n",(0,i.jsxs)(e.li,{children:["\u5730\u5740\uff1a\u5728 USB \u786c\u4ef6\u4f53\u7cfb\u4e2d\uff0c \u4e00\u4e2a Host \u5bf9\u5e94\u591a\u4e2a Logical Device\uff0c\u90a3\u4e48 Host \u53d1\u51fa\u7684\u5305\uff0c \u5982\u4f55\u786e\u5b9a\u53d1\u7ed9\u8c01\uff1f","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53d1\u7ed9\u6240\u6709\u8bbe\u5907\uff1a\u5305\u91cc\u4e0d\u542b\u6709\u8bbe\u5907\u5730\u5740"}),"\n",(0,i.jsx)(e.li,{children:"\u53d1\u7ed9\u67d0\u4e2a\u8bbe\u5907\uff1a\u5305\u91cc\u542b\u6709\u8bbe\u5907\u5730\u5740\u3001\u7aef\u70b9\u53f7"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u5e27\u53f7\u3001\u6570\u636e\u7b49\u8ddf PID \u76f8\u5173\u7684\u5185\u5bb9"}),"\n",(0,i.jsx)(e.li,{children:"CRC \u6821\u9a8c\u7801"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u53d1\u8d77\u4e00\u6b21\u5b8c\u6574\u7684\u4f20\u8f93\uff0c \u53ef\u80fd\u6d89\u53ca\u591a\u4e2a\u5305\u3002\u90a3\u4e48\uff0c\u7b2c 1 \u4e2a\u5305\u91cc\u542b\u6709\u8bbe\u5907\u5730\u5740\u3001\u7aef\u70b9\u53f7\uff0c \u540e\u7eed\u7684\u5305\u5c31\u6ca1\u5fc5\u8981\u5305\u542b\u8bbe\u5907\u5730\u5740\u3001\u7aef\u70b9\u53f7\u3002"}),"\n",(0,i.jsx)(e.h4,{id:"1-pid-\u57df",children:"1. PID \u57df"}),"\n",(0,i.jsx)(e.p,{children:'\u6ce8\u610f\uff1a \u6240\u6709\u7684 USB \u6587\u6863\u63d0\u5230\u7684"\u8f93\u5165"\u3001"\u8f93\u51fa"\uff0c\u90fd\u662f\u57fa\u4e8e Host \u7684\u89d2\u5ea6\uff0c "\u8f93\u51fa"\u8868\u793a\u4ece Host \u8f93\u51fa\u5230\u8bbe\u5907\uff0c"\u8f93\u5165"\u8868\u793a Host \u4ece\u8bbe\u5907\u5f97\u5230\u6570\u636e\u3002'}),"\n",(0,i.jsx)(e.p,{children:"\u6709\u54ea\u4e9b USB \u5305\uff1f \u6839\u636e\u5305\u6570\u636e\u91cc\u7684 PID \u7684 bit1, bit0 \u53ef\u4ee5\u5206\u4e3a 4 \u7c7b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ee4\u724c\u5305(Token)\uff1a01B"}),"\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u5305(Data)\uff1a11B"}),"\n",(0,i.jsx)(e.li,{children:"\u63e1\u624b\u5305(Handshake)\uff1a10B"}),"\n",(0,i.jsx)(e.li,{children:"\u7279\u6b8a\u5305(Special)\uff1a00B"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"PID \u6709 4 \u4f4d\uff0c\u4f7f\u7528 bit1,bit0 \u786e\u5b9a\u5206\u7c7b\uff0c \u4f7f\u7528 bit3,bit2 \u8fdb\u4e00\u6b65\u7ec6\u5206\u3002\u5982\u4e0b\u8868(\u6765\u81ea \u300a\u5708\u5708\u6559\u4f60\u73a9 USB\u300b)\u6240\u793a\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image28.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728 USB \u5305\u4e2d\uff0cPID \u57df\u4f7f\u7528 8 \u4f4d\u6765\u8868\u793a\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image29.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"\u524d 4 \u4f4d\u8868\u793a PID\uff0c\u540e 4 \u4f4d\u662f\u5bf9\u5e94\u4f4d\u7684\u53d6\u53cd\u3002\u63a5\u6536\u65b9\u53d1\u73b0\u540e 4 \u4f4d\u4e0d\u662f\u524d 4 \u4f4d\u7684\u53d6\u53cd\u7684\u8bdd\uff0c \u5c31\u8ba4\u4e3a\u53d1\u751f\u4e86\u9519\u8bef\u3002"}),"\n",(0,i.jsx)(e.h4,{id:"2-\u4ee4\u724c\u5305token",children:"2. \u4ee4\u724c\u5305(Token)"}),"\n",(0,i.jsx)(e.p,{children:'\u4ee4\u724c\u7c7b \u7684 PID \uff0c\u8d77 "\u901a\u77e5\u4f5c\u7528 " \uff0c\u901a\u77e5\u8c01 \uff1fSOF \u4ee4\u724c\u5305\u88ab\u7528\u6765\u901a \u77e5\u6240\u6709\u8bbe \u5907\uff0c OUT/IN/SETUP \u4ee4\u724c\u5305\u88ab\u7528\u6765\u901a\u77e5\u67d0\u4e2a\u8bbe\u5907\u3002'}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e OUT\u3001IN\u3001SETUP \u4ee4\u724c\u5305\uff0c \u5b83\u4eec\u90fd\u662f\u8981\u901a\u77e5\u5230\u5177\u4f53\u7684\u8bbe\u5907\uff0c \u683c\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image30.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"USB \u8bbe\u5907\u7684\u5730\u5740\u6709 7 \u4f4d\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image31.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"USB \u8bbe\u5907\u7684\u7aef\u70b9\u53f7\u6709 4 \u4f4d\uff0c \u683c\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image32.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:'\u5bf9\u4e8e SOF \u5305\uff0c\u82f1\u6587\u540d\u4e3a"Start-of-Frame marker and frame number"\u3002\u5bf9\u4e8e USB \u5168\u901f  \u8bbe\u5907\uff0c Host \u6bcf 1ms \u4ea7\u751f\u4e00\u4e2a\u5e27\uff1b \u5bf9\u4e8e\u9ad8\u901f\u8bbe\u5907\uff0c \u6bcf 125us \u4ea7\u751f\u4e00\u4e2a\u5fae\u5e27\uff0c 1 \u5e27\u91cc\u6709 8 \u4e2a\u5fae \u5e27\u3002 Host \u4f1a\u5bf9\u5f53\u524d\u5e27\u53f7\u8fdb\u884c\u7d2f\u52a0\u8ba1\u6570\uff0c \u5728\u6bcf\u5e27\u6216\u6bcf\u5fae\u5e27\u5f00\u59cb\u65f6\uff0c \u901a\u8fc7 SOF \u4ee4\u724c\u5305\u53d1\u9001\u5e27\u53f7\u3002 \u5bf9\u4e8e\u9ad8\u901f\u8bbe\u5907\uff0c \u6bcf 1 \u6beb\u79d2\u91cc\u6709 8 \u4e2a\u5fae\u5e27\uff0c\u8fd9 8 \u4e2a\u5fae\u5e27\u7684\u5e27\u53f7\u662f\u4e00\u6837\u7684\uff0c \u6bcf 125us \u53d1\u9001\u4e00\u4e2a  SOF \u4ee4\u724c\u5305\u3002'}),"\n",(0,i.jsx)(e.p,{children:"SOF \u4ee4\u724c\u5305\u683c\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image33.png",alt:"img"})}),"\n",(0,i.jsx)(e.h4,{id:"3-\u6570\u636e\u5305",children:"3. \u6570\u636e\u5305"}),"\n",(0,i.jsx)(e.p,{children:'Host \u4f7f\u7528 OUT\u3001IN\u3001SETUP \u6765\u901a\u77e5\u8bbe\u5907\uff1a\u6211\u8981\u4f20\u8f93\u6570\u636e\u4e86\u3002\u6570\u636e\u901a\u8fc7"\u6570\u636e\u5305"\u8fdb\u884c\u4f20 \u8f93\u3002'}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5305\u4e5f\u6709 4 \u79cd\u7c7b\u578b\uff1aDATA0\u3001DATA1\u3001DATA2\u3001MDATA\u3002\u5176\u4e2d DATA2\u3001MDATA \u5728\u9ad8\u901f\u8bbe\u5907 \u4e2d\u4f7f\u7528\u3002\u5bf9\u8f6f\u4ef6\u5f00\u53d1\u4eba\u5458\u6765\u8bf4\uff0c\u6211\u4eec\u6682\u65f6\u4ec5\u9700\u4e86\u89e3 DATA0\u3001DATA1\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165 DATA0\u3001DATA1 \u8fd9\u4e9b\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u5305\uff1f \u4e3a\u4e86\u7ea0\u9519\u3002"}),"\n",(0,i.jsx)(e.p,{children:"Host \u548c\u8bbe\u5907\u90fd\u4f1a\u7ef4\u62a4\u81ea\u5df1\u7684\u6570\u636e\u5305\u5207\u6362\u673a\u5236\uff0c\u5f53\u6570\u636e\u5305\u6210\u529f\u53d1\u9001\u6216\u8005\u63a5\u6536\u65f6\uff0c\u6570\u636e\u5305 \u7c7b\u578b\u5207\u6362\u3002\u5f53\u68c0\u6d4b\u5230\u5bf9\u65b9\u4f7f\u7528\u7684\u6570\u636e\u5305\u7c7b\u578b\u4e0d\u5bf9\u65f6\uff0cUSB \u7cfb\u7edf\u8ba4\u4e3a\u53d1\u751f\u4e86\u9519\u8bef\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u6bd4\u5982\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Host \u53d1\u9001 DATA0 \u7ed9\u8bbe\u5907\uff0c\u8bbe\u5907\u8fd4\u56de ACK \u8868\u793a\u6210\u529f\u63a5\u6536\uff0c \u8bbe\u5907\u671f\u5f85\u4e0b\u4e00\u4e2a\u6570\u636e\u662f DATA1"}),"\n",(0,i.jsx)(e.li,{children:"\u4f46\u662f Host \u6ca1\u6709\u63a5\u6536\u5230 ACK\uff0cHost \u8ba4\u4e3a\u6570\u636e\u6ca1\u6709\u53d1\u9001\u6210\u529f\uff0cHost \u7ee7\u7eed\u4f7f\u7528 DATA0 \u53d1\u9001\u4e0a \u4e00\u6b21\u7684\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"\u8bbe\u5907\u518d\u6b21\u63a5\u6536\u5230 DATA0 \u6570\u636e\u5305\uff0c \u5b83\u5c31\u77e5\u9053\uff1a\u54e6\uff0c\u8fd9\u662f\u91cd\u4f20\u7684\u6570\u636e\u5305"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5305\u683c\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image34.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u5168\u901f\u8bbe\u5907\uff0c \u6570\u636e\u5305\u4e2d\u7684\u6570\u636e\u505a\u5927\u662f 1023 \u5b57\u8282\uff1b\u5bf9\u4e8e\u5168\u901f\u8bbe\u5907\uff0c \u6570\u636e\u5305\u4e2d\u7684\u6570\u636e\u505a \u5927\u662f 1024 \u5b57\u8282\u3002"}),"\n",(0,i.jsx)(e.h4,{id:"4-\u63e1\u624b\u5305",children:"4. \u63e1\u624b\u5305"}),"\n",(0,i.jsx)(e.p,{children:"\u63e1\u624b\u5305\u6709 4 \u7c7b\uff1a ACK\u3001NAK\u3001STALL\u3001NYET"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"ACK\uff1a\u6570\u636e\u63a5\u6536\u65b9\u7528\u6765\u56de\u590d\u53d1\u9001\u65b9\uff0c\u8868\u793a\u6b63\u786e\u63a5\u6536\u5230\u4e86\u6570\u636e\u5e76\u4e14\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u4fdd\u5b58\u6570\u636e\u3002"}),"\n",(0,i.jsx)(e.li,{children:'NAK\uff1aHost \u53d1\u9001\u6570\u636e\u7ed9\u8bbe\u5907\u65f6\uff0c \u8bbe\u5907\u53ef\u4ee5\u56de\u5e94 NAK \u8868\u793a"\u6211\u8fd8\u6ca1\u51c6\u5907\u597d\uff0c\u6ca1\u529e\u6cd5\u63a5\u6536\u6570\u636e"\uff1b Host \u60f3\u8bfb\u53d6\u8bbe\u5907\u7684\u6570\u636e\u65f6\uff0c \u8bbe\u5907\u53ef\u4ee5\u56de\u590d NAK \u8868\u793a"\u6211\u6ca1\u6709\u6570\u636e\u7ed9\u4f60"\u3002'}),"\n",(0,i.jsx)(e.li,{children:"STALL\uff1a\u8868\u793a\u53d1\u751f\u4e86\u9519\u8bef\uff0c\u6bd4\u5982\u8bbe\u5907\u65e0\u6cd5\u6267\u884c\u8fd9\u4e2a\u8bf7\u6c42(\u4e0d\u652f\u6301\u8be5\u65ad\u70b9\u7b49\u5f85)\u3001\u65ad\u70b9\u5df2\u7ecf\u6302\u8d77\u3002\u8bbe\u5907\u8fd4\u56de STALL \u540e\uff0c\u9700\u8981\u4e3b\u673a\u8fdb\u884c\u5e72\u9884\u624d\u80fd\u63a5\u89e6 STALL \u72b6\u6001\u3002"}),"\n",(0,i.jsx)(e.li,{children:'NYET\uff1a\u4ec5\u9002\u7528\u4e8e\u9ad8\u901f\u8bbe\u5907\u3002 Host \u53ef\u4ee5\u53d1\u51fa PING \u5305\u7528\u6765\u786e\u8ba4\u8bbe\u5907\u6709\u6570\u636e\uff0c\u8bbe\u5907\u53ef\u4ee5\u56de\u5e94 NYET \u8868\u793a"\u8fd8\u6ca1\u5462"\u3002Hub \u4e5f\u53ef\u4ee5\u56de\u5e94 NYET \u8868\u793a\u4f4e\u901f/\u5168\u901f\u4f20\u8f93\u8fd8\u6ca1\u5b8c\u7ed3\u3002'}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"446-\u4f20\u8f93\u7ec6\u8282",children:"4.4.6 \u4f20\u8f93\u7ec6\u8282"}),"\n",(0,i.jsx)(e.h4,{id:"1-\u4f20\u8f93transfer\u548c\u4e8b\u52a1transaction",children:"1. \u4f20\u8f93(Transfer)\u548c\u4e8b\u52a1(Transaction)"}),"\n",(0,i.jsx)(e.p,{children:"USB \u4f20\u8f93\u7684\u57fa\u672c\u5355\u4f4d\u662f\u5305(Packet)\uff0c\u5305\u7684\u7c7b\u578b\u7531PID \u8868\u793a\u3002 \u4e00\u4e2a\u5355\u7eaf\u7684\u5305\uff0c\u662f\u65e0\u6cd5\u4f20\u8f93 \u5b8c\u6574\u7684\u6570\u636e\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3a\u4ec0\u4e48\uff1f\u6bd4\u5982\u60f3\u8f93\u51fa\u6570\u636e\uff0c\u53ef\u4ee5\u53d1\u51fa OUT \u4ee4\u724c\u5305\uff0c OUT \u4ee4\u724c\u5305\u53ef\u4ee5\u6307\u5b9a\u76ee\u7684\u5730\u3002\u4f46\u662f\u6570 \u636e\u5982\u4f55\u4f20\u8f93\u5462\uff1f \u8fd8\u9700\u8981\u53d1\u51fa DATA0 \u6216 DATA1 \u6570\u636e\u5305\u3002\u8bbe\u5907\u6536\u5230\u6570\u636e\u540e\uff0c \u8fd8\u8981\u56de\u590d\u4e00\u4e2a ACK \u63e1\u624b\u5305\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u6240\u4ee5\uff0c\u5b8c\u6574\u7684\u6570\u636e\u4f20\u8f93\uff0c \u9700\u8981\u6d89\u53ca\u591a\u4e2a\u5305\uff1a\u4ee4\u724c\u5305\u3001\u6570\u636e\u5305\u3001\u63e1\u624b\u5305\u3002\u8fd9\u4e2a\u5b8c\u6574\u7684\u6570 \u636e\u4f20\u8f93\u8fc7\u7a0b\uff0c\u88ab\u79f0\u4e3a\u4e8b\u52a1(Transaction)\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u6709\u4e9b\u4e8b\u52a1\u9700\u8981\u63e1\u624b\u5305\uff0c\u6709\u4e9b\u4e8b\u52a1\u4e0d\u9700\u8981\u63e1\u624b\u5305\uff0c\u6709\u4e9b\u4e8b\u52a1\u53ef\u4ee5\u4f20\u8f93\u5f88\u5927\u7684\u6570\u636e\uff0c\u6709\u4e9b \u4e8b\u52a1\u53ea\u80fd\u4f20\u8f93\u5c0f\u91cf\u6570\u636e\u3002"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6709\u56db\u7c7b\u4e8b\u52a1\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6279\u91cf\u4e8b\u52a1\uff1a\u7528\u6765\u4f20\u8f93\u5927\u91cf\u7684\u6570\u636e\uff0c\u6570\u636e\u7684\u6b63\u786e\u6027\u6709\u4fdd\u8bc1\uff0c\u65f6\u6548\u6ca1\u6709\u4fdd\u8bc1\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u4e2d\u65ad\u4e8b\u52a1\uff1a\u7528\u6765\u4f20\u8f93\u5468\u671f\u6027\u7684\u3001\u5c0f\u91cf\u7684\u6570\u636e\uff0c \u6570\u636e\u7684\u6b63\u786e\u6027\u548c\u65f6\u6548\u90fd\u6709\u4fdd\u8bc1\u3002 \u2462 \u5b9e\u65f6\u4e8b\u52a1\uff1a\u7528\u6765\u4f20\u8f93\u5b9e\u65f6\u6570\u636e\uff0c \u6570\u636e\u7684\u6b63\u786e\u6027\u6ca1\u6709\u4fdd\u8bc1\uff0c\u65f6\u6548\u6709\u4fdd\u8bc1\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u5efa\u7acb\u4e8b\u52a1\uff1a\u8ddf\u6279\u91cf\u4e8b\u52a1\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u4ee4\u724c\u5305\u662f SETUP \u4ee4\u724c\u5305\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6709\u56db\u7c7b\u4f20\u8f93(Transfer)\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6279\u91cf\u4f20\u8f93\uff1a\u5c31\u662f\u4f7f\u7528\u6279\u91cf\u4e8b\u52a1\u5b9e\u73b0\u6570\u636e\u4f20\u8f93\uff0c \u6bd4\u5982 U \u76d8\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u4e2d\u65ad\u4f20\u8f93\uff1a\u5c31\u662f\u4f7f\u7528\u4e2d\u65ad\u4e8b\u52a1\u5b9e\u73b0\u6570\u636e\u4f20\u8f93\uff0c \u6bd4\u5982\u9f20\u6807\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u5b9e\u65f6\u4f20\u8f93\uff1a\u5c31\u662f\u4f7f\u7528\u5b9e\u65f6\u4e8b\u52a1\u5b9e\u73b0\u6570\u636e\u4f20\u8f93\uff0c \u6bd4\u5982\u6444\u50cf\u5934\u3002"}),"\n",(0,i.jsx)(e.li,{children:'\u63a7\u5236\u4f20\u8f93\uff1a\u7531\u5efa\u7acb\u4e8b\u52a1\u3001\u6279\u91cf\u4e8b\u52a1\u7ec4\u6210\uff0c\u6240\u6709\u7684 USB \u8bbe\u5907\u90fd\u5fc5\u987b\u652f\u6301\u63a7\u5236\u4f20\u8f93\uff0c \u7528\u4e8e" \u8bc6\u522b/\u679a\u4e3e"'}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6682\u65f6\u8bb0\u4f4f\u8fd9\u4e2a\u5173\u7cfb\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"BIT \u7ec4\u6210\u57df(Field)"}),"\n",(0,i.jsx)(e.li,{children:"\u57df\u7ec4\u6210\u5305(Packet)"}),"\n",(0,i.jsx)(e.li,{children:"\u5305\u7ec4\u6210\u4e8b\u52a1(Transaction)"}),"\n",(0,i.jsx)(e.li,{children:"\u4e8b\u52a1\u7ec4\u6210\u4f20\u8f93(Transfer)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"2-\u8fc7\u7a0bstage\u548c\u9636\u6bb5phase",children:"2. \u8fc7\u7a0b(stage)\u548c\u9636\u6bb5(phase)"}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u7531\u591a\u4e2a\u5305\u7ec4\u6210\uff0c \u6bd4\u5982 Host \u8981\u53d1\u9001\u6570\u636e\u7ed9\u8bbe\u5907\uff0c\u8fd9\u5c31\u4f1a\u6d89\u53ca\u5f88\u591a\u4e2a\u5305\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Host \u53d1\u51fa OUT \u4ee4\u724c\u5305\uff0c \u8868\u793a\u8981\u53d1\u6570\u636e\u7ed9\u54ea\u4e2a\u8bbe\u5907"}),"\n",(0,i.jsx)(e.li,{children:"Host \u53d1\u51fa DATA0 \u6570\u636e\u5305"}),"\n",(0,i.jsx)(e.li,{children:"\u8bbe\u5907\u6536\u5230\u6570\u636e\u540e\uff0c \u56de\u5e94 ACK \u5305"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u4e2a\u5b8c\u6574\u7684\u4e8b\u52a1\u6d89\u53ca 3 \u4e2a\u5305(Packet)\uff0c\u5206\u4e3a 3 \u4e2a\u9636\u6bb5(Phase)\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ee4\u724c\u9636\u6bb5(Token phase)\uff1a\u7531\u4ee4\u724c\u5305\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u9636\u6bb5(Data phase)\uff1a\u7531\u6570\u636e\u5305\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.li,{children:"\u63e1\u624b\u9636\u6bb5(Handshake phase)\uff1a\u7531\u63e1\u624b\u5305\u5b9e\u73b0"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u7531\u5305\u7ec4\u6210\uff0c \u8fd9\u4e9b\u5305\u5206\u522b\u5904\u4e8e 3 \u4e2a\u9636\u6bb5(phase)\uff1a\u4ee4\u724c\u9636\u6bb5\uff0c\u6570\u636e\u9636\u6bb5\uff0c \u63e1\u624b\u9636\u6bb5\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u6279\u91cf\u4f20\u8f93\u3001\u4e2d\u65ad\u4f20\u8f93\u3001\u5b9e\u65f6\u4f20\u8f93\uff0c\u5b83\u4eec\u5206\u522b\u7531\u4e00\u4e2a\u4e8b\u52a1\u7ec4\u6210\uff0c\u4e0d\u518d\u7ec6\u5206\u4e3a\u82e5\u5e72\u4e2a \u8fc7\u7a0b\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4f46\u662f\u63a7\u5236\u4f20\u8f93\u7531\u591a\u4e2a\u4e8b\u52a1\u7ec4\u6210\uff0c\u8fd9\u4e9b\u4e8b\u52a1\u5206\u522b\u5904\u4e8e 3 \u4e2a\u8fc7\u7a0b\uff1a \u5efa\u7acb\u8fc7\u7a0b(stage)\u3001\u6570\u636e \u8fc7\u7a0b(stage)\u3001\u72b6\u6001\u8fc7\u7a0b(stage)\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u603b\u7ed3\u8d77\u6765\u5c31\u662f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63a7\u5236\u4f20\u8f93\u7531\u591a\u4e2a\u8fc7\u7a0b(stage)\u7ec4\u6210\uff0c \u6bcf\u4e2a\u8fc7\u7a0b\u7531\u4e00\u4e2a\u4e8b\u52a1\u6765\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u4e2a\u4e8b\u52a1\u7531\u591a\u4e2a\u9636\u6bb5(phase)\u7ec4\u6210\uff0c \u6bcf\u4e2a\u9636\u6bb5\u6709\u4e00\u4e2a\u5305\u6765\u5b9e\u73b0"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"3-\u6279\u91cf\u4f20\u8f93",children:"3. \u6279\u91cf\u4f20\u8f93"}),"\n",(0,i.jsx)(e.p,{children:"\u6279\u91cf\u4f20\u8f93\u7528\u6279\u91cf\u4e8b\u52a1\u6765\u5b9e\u73b0\uff0c\u7528\u4e8e\u4f20\u8f93\u5927\u91cf\u7684\u6570\u636e\uff0c \u6570\u636e\u7684\u6b63\u786e\u6027\u6709\u4fdd\u8bc1\uff0c \u65f6\u6548\u6ca1\u6709 \u4fdd\u8bc1\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u6279\u91cf\u4e8b\u52a1\u7531 3 \u4e2a\u9636\u6bb5(phase)\u7ec4\u6210\uff1a \u4ee4\u724c\u9636\u6bb5\u3001\u6570\u636e\u9636\u6bb5\u3001\u63e1\u624b\u9636\u6bb5\u3002\u6bcf\u4e2a\u9636\u6bb5\u90fd\u662f\u4e00 \u4e2a\u5b8c\u6574\u7684\u5305\uff0c\u542b\u6709 SOP\u3001SYNC\u3001PID\u3001EOP\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4e0b\u56fe\u4e2d\u5404\u4e2a\u77e9\u5f62\u6846\u5c31\u5bf9\u5e94\u4e00\u4e2a\u5b8c\u6574\u7684\u5305\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image35.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"\u300a\u5708\u5708\u6559\u4f60\u73a9 USB\u300b\u4e2d\u6709\u8be6\u7ec6\u7684\u793a\u4f8b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image36.png",alt:"img"})}),"\n",(0,i.jsx)(e.h4,{id:"4\u4e2d\u65ad\u4f20\u8f93",children:"4.\u4e2d\u65ad\u4f20\u8f93"}),"\n",(0,i.jsx)(e.p,{children:"\u4e2d\u65ad\u4f20\u8f93\u7528\u4e2d\u65ad\u4e8b\u52a1\u6765\u5b9e\u73b0\uff0c\u7528\u4e8e\u4f20\u8f93\u5c0f\u91cf\u7684\u3001\u5468\u671f\u6027\u7684\u6570\u636e\uff0c\u6570\u636e\u7684\u6b63\u786e\u6027\u548c\u65f6\u6548 \u90fd\u6709\u4fdd\u8bc1\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4e2d\u65ad\u4e8b\u52a1\u7531 3 \u4e2a\u9636\u6bb5(phase)\u7ec4\u6210\uff1a \u4ee4\u724c\u9636\u6bb5\u3001\u6570\u636e\u9636\u6bb5\u3001\u63e1\u624b\u9636\u6bb5\u3002\u6bcf\u4e2a\u9636\u6bb5\u90fd\u662f\u4e00 \u4e2a\u5b8c\u6574\u7684\u5305\uff0c\u542b\u6709 SOP\u3001SYNC\u3001PID\u3001EOP\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4e0b\u56fe\u4e2d\u5404\u4e2a\u77e9\u5f62\u6846\u5c31\u5bf9\u5e94\u4e00\u4e2a\u5b8c\u6574\u7684\u5305\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image37.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e2d\u65ad\u4e8b\u52a1\u8ddf\u6279\u91cf\u4e8b\u52a1\u975e\u5e38\u7c7b\u4f3c\uff0cHost \u4f7f\u7528\u5b83\u6765\u5468\u671f\u6027\u5730\u8bfb\u6570\u636e\u3001\u5199\u6570\u636e\u3002"}),"\n",(0,i.jsx)(e.p,{children:'\u4ee5\u9f20\u6807\u4e3a\u4f8b\uff0c\u6211\u4eec\u9700\u8981\u53ca\u65f6\u83b7\u5f97\u9f20\u6807\u7684\u6570\u636e\uff0c \u4e0d\u53ca\u65f6\u7684\u8bdd\u4f60\u4f1a\u611f\u89c9\u9f20\u6807\u5f88\u8fdf\u949d\u3002\u4f46\u662f USB \u534f\u8bae\u4e2d\u5e76\u6ca1\u6709\u4e2d\u65ad\u529f\u80fd\uff0c\u5b83\u4f7f\u7528"\u5468\u671f\u6027\u7684\u8bfb\u3001\u5199"\u6765\u5b9e\u73b0\u53ca\u65f6\u6027\u3002\u5177\u4f53\u8fc7\u7a0b\u5982\u4e0b\uff1a'}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Host \u6bcf\u9694 n \u6beb\u79d2\u53d1\u51fa\u4e00\u4e2a IN \u4ee4\u724c\u5305"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9f20\u6807\u6709\u6570\u636e\u7684\u8bdd\uff0c\u53d1\u51fa DATA0 \u6216 DATA1 \u6570\u636e\u5305\u7ed9 Host\uff1b\u9f20\u6807\u6ca1\u6709\u6570\u636e\u7684\u8bdd\uff0c\u53d1\u51fa NAK \u7ed9 Host\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e2d\u65ad\u4e8b\u52a1\u7684\u4f18\u5148\u7ea7\u6bd4\u6279\u91cf\u4e8b\u52a1\u66f4\u9ad8\uff0c\u5b83\u8981\u6c42\u5b9e\u65f6\u6027\uff0c\u800c\u6279\u91cf\u4e8b\u52a1\u4e0d\u8981\u6c42\u5b9e\u65f6\u6027\u3002"}),"\n",(0,i.jsx)(e.h4,{id:"5\u5b9e\u65f6\u4f20\u8f93",children:"5.\u5b9e\u65f6\u4f20\u8f93"}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u65f6\u4f20\u8f93\u7528\u5b9e\u65f6\u4e8b\u52a1\u6765\u5b9e\u73b0\uff0c \u7528\u4e8e\u4f20\u8f93\u5b9e\u65f6\u6570\u636e\uff0c \u5bf9\u6570\u636e\u7684\u6b63\u786e\u6027\u6ca1\u6709\u8981\u6c42\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u65f6\u4e8b\u52a1\u7531 2 \u4e2a\u9636\u6bb5(phase)\u7ec4\u6210\uff1a \u4ee4\u724c\u9636\u6bb5\u3001\u6570\u636e\u9636\u6bb5\u3002\u6bcf\u4e2a\u9636\u6bb5\u90fd\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u5305\uff0c \u542b\u6709 SOP\u3001SYNC\u3001PID\u3001EOP\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u65f6\u4e8b\u52a1\u4e0d\u9700\u8981\u63e1\u624b\u9636\u6bb5\uff0c\u4e00\u4e2a\u793a\u4f8b\u7684\u573a\u666f\u662f\uff1a\u4e3a\u4e86\u4f20\u8f93\u6444\u50cf\u5934\u7684\u5b9e\u65f6\u6570\u636e\uff0c\u5076\u5c14\u7684 \u6570\u636e\u9519\u8bef\u662f\u53ef\u4ee5\u5fcd\u53d7\u7684\uff0c\u5927\u4e0d\u4e86\u51fa\u73b0\u77ed\u6682\u7684\u82b1\u5c4f\u3002\u5982\u679c\u4e3a\u4e86\u89e3\u51b3\u82b1\u5c4f\u800c\u91cd\u4f20\u6570\u636e\uff0c \u90a3\u5c31\u4f1a"}),"\n",(0,i.jsx)(e.p,{children:"\u5bfc\u81f4\u540e\u7eed\u753b\u9762\u88ab\u63a8\u8fdf\uff0c\u5b9e\u65f6\u6027\u65e0\u6cd5\u5f97\u5230\u4fdd\u8bc1\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4e0b\u56fe\u4e2d\u5404\u4e2a\u77e9\u5f62\u6846\u5c31\u5bf9\u5e94\u4e00\u4e2a\u5b8c\u6574\u7684\u5305\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image38.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u65f6\u4e8b\u52a1\u8ddf\u4e2d\u65ad\u4e8b\u52a1\u975e\u5e38\u7c7b\u4f3c\uff0cHost \u4e5f\u4f1a\u5468\u671f\u6027\u7684\u53d1\u8d77\u5b9e\u65f6\u4e8b\u52a1\uff0c\u4e3b\u8981\u533a\u522b\u5728\u4e8e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9e\u65f6\u4e8b\u52a1\u4e0d\u8981\u6c42\u51c6\u786e\u6027\uff0c\u6ca1\u6709\u63e1\u624b\u9636\u6bb5"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9e\u65f6\u4e8b\u52a1\u4f20\u8f93\u7684\u6570\u636e\u91cf\u6bd4\u8f83\u5927\uff0c \u4e2d\u65ad\u4e8b\u52a1\u4f20\u8f93\u7684\u6570\u636e\u91cf\u6bd4\u8f83\u5c0f"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"6-\u63a7\u5236\u4f20\u8f93",children:"6. \u63a7\u5236\u4f20\u8f93"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u4f7f\u7528\u6279\u91cf\u4f20\u8f93\u65f6\uff0c \u4f7f\u7528 IN \u4ee4\u724c\u5305\u6216 OUT \u4ee4\u724c\u5305\u8868\u793a\u6570\u636e\u4f20\u8f93\u65b9\u5411\u3002"}),"\n",(0,i.jsx)(e.p,{children:'\u63a7\u5236\u4f20\u8f93\u7684\u4ee4\u724c\u5305\u6c38\u8fdc\u662f SETUP\uff0c\u600e\u4e48\u5206\u8fa8\u662f\u8bfb\u6570\u636e\uff0c \u8fd8\u662f\u5199\u6570\u636e\uff1f \u53d1\u51fa SETUP \u4ee4\u724c\u5305 \u540e\uff0c\u8fd8\u8981\u53d1\u51fa DATA0 \u6570\u636e\u5305\uff0c\u6839\u636e\u6570\u636e\u7684\u5185\u5bb9\u6765\u786e\u5b9a\u540e\u7eed\u662f\u8bfb\u6570\u636e\uff0c\u8fd8\u662f\u5199\u6570\u636e\u3002\u8fd9\u4e2a\u8fc7 \u7a0b\u79f0\u4e3a"\u5efa\u7acb\u4e8b\u52a1"(SETUP Transaction)'}),"\n",(0,i.jsx)(e.p,{children:"\u4f46\u662f\u63a7\u5236\u4f20\u8f93\u7531\u591a\u4e2a\u4e8b\u52a1\u7ec4\u6210\uff0c\u8fd9\u4e9b\u4e8b\u52a1\u5206\u522b\u5904\u4e8e 3 \u4e2a\u8fc7\u7a0b\uff1a \u5efa\u7acb\u8fc7\u7a0b(stage)\u3001\u6570\u636e \u8fc7\u7a0b(stage)\u3001\u72b6\u6001\u8fc7\u7a0b(stage)\u3002"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u7acb\u8fc7\u7a0b(stage)\uff0c\u4f7f\u7528 SETUP \u4e8b\u52a1\uff1aHost \u53d1\u51fa SETUP \u4ee4\u724c\u5305\u3001DATA0 \u6570\u636e\u5305\u3001\u5f97\u5230 ACK \u63e1\u624b\u5305"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u8fc7\u7a0b(stage)\uff0c\u4f7f\u7528\u6279\u91cf\u4e8b\u52a1\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e\u8f93\u51fa\uff1aHost \u53d1\u51fa OUT \u4ee4\u724c\u5305\uff0c\u53d1\u51fa DATA0\u3001DATA1 \u6570\u636e\u5305\u3001\u5f97\u5230 ACK \u63e1\u624b\u5305"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e\u8f93\u5165\uff1aHost \u53d1\u51fa IN \u4ee4\u724c\u5305\uff0c\u8bfb\u5230 DATA0\u3001DATA1 \u6570\u636e\u5305\u3001\u53d1\u51fa ACK \u63e1\u624b\u5305 \u2462 \u72b6\u6001\u8fc7\u7a0b(stage)\uff0c\u4f7f\u7528\u6279\u91cf\u4e8b\u52a1\uff1a"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e\u8f93\u51fa\uff1aHost \u53d1\u51fa IN \u4ee4\u724c\u5305\uff0c\u8bfb\u5230 DATA1 \u6570\u636e\u5305\uff0c\u53d1\u51fa ACK \u63e1\u624b\u5305 b. \u5bf9\u4e8e\u8f93\u5165\uff1aHost \u53d1\u51fa OUT \u4ee4\u724c\u5305\uff0c\u53d1\u51fa DATA1 \u6570\u636e\u5305\uff0c\u7b49\u5f85 ACK \u63e1\u624b\u5305"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image39.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e0a\u56fe\u4e2d\u7684\u6bcf\u4e00\u4e2a\u65b9\u6846\uff0c\u90fd\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u4e8b\u52a1\uff0c \u542b\u6709\uff1a Token Packet\u3001Data Packet\u3001 Handshake Packet\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"447-\u4f7f\u7528\u5de5\u5177\u4f53\u9a8c\u6570\u636e\u683c\u5f0f",children:"4.4.7 \u4f7f\u7528\u5de5\u5177\u4f53\u9a8c\u6570\u636e\u683c\u5f0f"}),"\n",(0,i.jsx)(e.p,{children:"LeCroy(\u529b\u79d1)\u6210\u7acb\u4e8e 1964 \u5e74\uff0c \u662f\u4e00\u5bb6\u4e13\u4e1a\u751f\u4ea7\u793a\u6ce2\u5668\u5382\u5bb6\u3002\u65d7\u4e0b\u751f\u4ea7\u6709\u6570\u5b57\u793a\u6ce2\u5668\u3001 SDA \u7cfb\u5217\u6570\u5b57\u793a\u6ce2\u5668\u3001\u6df7\u5408\u4fe1\u53f7\u793a\u6ce2\u5668\u3001\u6a21\u5757\u5316\u4eea\u5668\u3001\u4efb\u610f\u6ce2\u5f62\u53d1\u751f\u5668\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u5b98\u7f51\u662f\uff1a",(0,i.jsx)(e.a,{href:"https://teledynelecroy.com/%EF%BC%8C%E4%BC%BC%E4%B9%8E%E6%97%A0%E6%B3%95%E6%B3%A8%E5%86%8C%E6%96%B0%E7%94%A8%E6%88%B7%EF%BC%8C%E6%97%A0%E6%B3%95%E4%B8%8B%E8%BD%BD%E8%BD%AF%E4%BB%B6%E3%80%82",children:"https://teledynelecroy.com/\uff0c\u4f3c\u4e4e\u65e0\u6cd5\u6ce8\u518c\u65b0\u7528\u6237\uff0c\u65e0\u6cd5\u4e0b\u8f7d\u8f6f\u4ef6\u3002"}),' \u53ef\u4ee5\u5728\u641c\u7d22\u5f15\u64ce\u91cc\u641c"usbprotocolsuite"\u3002']}),"\n",(0,i.jsx)(e.p,{children:'\u5b89\u88c5"usbprotocolsuite"\u540e\uff0c \u53ef\u4ee5\u5728\u6587\u6863\u76ee\u5f55\u91cc\u627e\u6253\u5f88\u591a\u793a\u7a0b\u5e8f(\u540e\u7f00\u540d\u4e3a usb)\uff1a'}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image40.png",alt:"img"})}),"\n",(0,i.jsx)(e.p,{children:'\u4f7f\u7528"usbprotocolsuite"\u6253\u5f00\u8fd9\u4e9b\u6587\u4ef6\uff0c\u5373\u53ef\u4f53\u9a8c USB \u6570\u636e\u4f20\u8f93\uff1a'}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"http://photos.100ask.net/modbus-docs/project_one/chapter5/image41.png",alt:"img"})})]})}function j(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(p,{...n})}):p(n)}},1151:(n,e,s)=>{s.d(e,{Z:()=>h,a:()=>r});var i=s(7294);const l={},c=i.createContext(l);function r(n){const e=i.useContext(c);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function h(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),i.createElement(c.Provider,{value:e},n.children)}}}]);